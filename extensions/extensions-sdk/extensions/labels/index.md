# 扩展镜像标签

扩展使用镜像标签来提供额外信息，例如标题、描述、截图等。

这些信息随后会作为扩展的概览显示出来，以便用户选择安装。

![由标签生成的扩展概览](images/marketplace-details.png)

你可以在扩展的 `Dockerfile` 中定义 [image labels](/reference/dockerfile.md#label)。

> [!IMPORTANT]
>
> 如果 `Dockerfile` 中缺少任何**必需**的标签，Docker Desktop 会认为该扩展无效，并且不会在市场中列出。


以下是在构建扩展时你可以或需要指定的标签列表：

| Label                                       | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Example                                                                                                                                                                                                                                                         |
| ------------------------------------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `org.opencontainers.image.title`            | Yes      | 镜像的人类可读标题（字符串）。它会显示在 Docker Desktop 的用户界面中。                                                                                                                                                                                                                                                                                                                                                                                                                 | my-extension                                                                                                                                                                                                                                                    |
| `org.opencontainers.image.description`      | Yes      | 镜像中打包的软件的人类可读描述（字符串）                                                                                                                                                                                                                                                                                                                                                                                                                                           | This extension is cool.                                                                                                                                                                                                                                         |
| `org.opencontainers.image.vendor`           | Yes      | 分发实体、组织或个人的名称。                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Acme, Inc.                                                                                                                                                                                                                                                      |
| `com.docker.desktop.extension.api.version`  | Yes      | 扩展所兼容的 Docker Extension 管理器版本。必须遵循 [语义化版本](https://semver.org/)。                                                                                                                                                                                                                                                                                                                                                                         | A specific version like `0.1.0` or, a constraint expression: `>= 0.1.0`, `>= 1.4.7, < 2.0` . For your first extension, you can use `docker extension version` to know the SDK API version and specify `>= <SDK_API_VERSION>`.                                   |
| `com.docker.desktop.extension.icon`         | Yes      | 扩展图标（格式：.svg .png .jpg）                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `https://example.com/assets/image.svg`                                                                                                                                                                                                                          |
| `com.docker.extension.screenshots`          | Yes      | 一个包含图像 URL 和替代文本的 JSON 数组，按元数据中的顺序显示在您扩展的详情页中。**注意：**建议的截图尺寸为 2400x1600 像素。                                                                                                                                                                                                                                                              | `[{"alt":"alternative text for image 1",` `"url":"https://example.com/image1.png"},` `{"alt":"alternative text for image2",` `"url":"https://example.com/image2.jpg"}]`                                                                                         |
| `com.docker.extension.detailed-description` | Yes      | 用于在详情对话框中显示的、关于扩展的纯文本或 HTML 格式的附加信息。                                                                                                                                                                                                                                                                                                                                                                                                    | `My detailed description` or `<h1>My detailed description</h1>`                                                                                                                                                                                                 |
| `com.docker.extension.publisher-url`        | Yes      | 要在详情对话框中显示的发布者网站 URL。                                                                                                                                                                                                                                                                                                                                                                                                                                           | `https://example.com`                                                                                                                                                                                                                                           |
| `com.docker.extension.additional-urls`      | No       | 一个包含标题和附加 URL 的 JSON 数组，按元数据中的顺序显示在您扩展的详情页中。Docker 建议您在适用时显示以下链接：文档、支持、服务条款和隐私政策链接。                                                                                                                                                                                                                  | `[{"title":"Documentation","url":"https://example.com/docs"},` `{"title":"Support","url":"https://example.com/bar/support"},` `{"title":"Terms of Service","url":"https://example.com/tos"},` `{"title":"Privacy policy","url":"https://example.com/privacy"}]` |
| `com.docker.extension.changelog`            | Yes      | 纯文本或 HTML 格式的更新日志，仅包含当前版本的变更。                                                                                                                                                                                                                                                                                                                                                                                                          | `Extension changelog` or `<p>Extension changelog<ul>` `<li>New feature A</li>` `<li>Bug fix on feature B</li></ul></p>`                                                                                                                                         |
| `com.docker.extension.account-info`         | No       | 用户是否需要注册到 SaaS 平台才能使用扩展的某些功能。                                                                                                                                                                                                                                                                                                                                                                                                                     | `required`（如果需要），否则留空。                                                                                                                                                                                                                              |
| `com.docker.extension.categories`           | No       | 您扩展所属的 Marketplace 类别列表：`ci-cd`, `container-orchestration`, `cloud-deployment`, `cloud-development`, `database`, `kubernetes`, `networking`, `image-registry`, `security`, `testing-tools`, `utility-tools`,`volumes`. 如果您不指定此标签，用户在按类别筛选时将无法在扩展市场中找到您的扩展。在 2022 年 9 月 22 日之前发布到市场的扩展已由 Docker 自动分类。 | 如果有多个类别，则以逗号分隔值的形式指定，例如：`kubernetes,security`；或单个值，例如：`kubernetes`。                                                                                                                                                                   |

> [!TIP]
>
> Docker Desktop 会为提供的 HTML 内容应用 CSS 样式。你可以确保它在 [市场内](#preview-the-extension-in-the-marketplace)正确渲染。建议您遵循 [样式指南](../design/_index.md)。

## 在市场中预览扩展

你可以验证镜像标签是否按预期渲染。

当你创建并安装未发布的扩展时，你可以在市场的 **已管理** 标签页中预览该扩展。你可以看到扩展标签在列表和扩展详情页中的渲染效果。

> 预览已列在市场中的扩展
>
> 当你安装一个已在市场中发布的扩展的本地镜像时，例如带有 `latest` 标签，你的本地镜像不会被检测为“未发布”。
>
> 你可以为你的镜像重新打标签，以获得一个未被列为已发布扩展的不同镜像名称。
> 使用 `docker tag org/published-extension unpublished-extension`，然后使用 `docker extension install unpublished-extension`。

![列表预览](images/list-preview.png)
