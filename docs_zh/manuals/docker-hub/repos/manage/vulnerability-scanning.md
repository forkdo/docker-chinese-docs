---
description: 了解 Docker Hub 中的漏洞扫描和 Docker Scout 镜像分析功能。
keywords: 扫描, 漏洞, Hub, 静态
title: 镜像安全洞察
weight: 70
aliases:
- /docker-hub/vulnerability-scanning/
---

通过 Docker Hub 的镜像安全洞察功能，加强您的 Docker 镜像安全性。Docker Hub 允许您对 Docker Hub 仓库中的镜像执行一次性静态漏洞扫描或使用 Docker Scout 进行实时更新的镜像分析。

## Docker Scout 镜像分析

启用 Docker Scout 镜像分析后，Docker Scout 会自动分析您 Docker Hub 仓库中的镜像。

镜像分析会提取软件物料清单 (SBOM) 和其他镜像元数据，并将其与安全公告中的漏洞数据进行比对评估。

以下部分描述了如何为 Docker Hub 仓库开启或关闭 Docker Scout 镜像分析。有关镜像分析的更多详细信息，请参阅 [Docker Scout](/manuals/scout/_index.md)。

### 开启 Docker Scout 镜像分析

1. 登录到 [Docker Hub](https://hub.docker.com)。
2. 选择 **My Hub** > **Repositories**。

   您的仓库列表出现。

3. 选择一个仓库。

   仓库的 **General** 页面出现。

4. 选择 **Settings** 标签页。
5. 在 **Image security insight settings** 下，选择 **Docker Scout image analysis**。
6. 选择 **Save**。

### 关闭 Docker Scout 镜像分析

1. 登录到 [Docker Hub](https://hub.docker.com)。
2. 选择 **My Hub** > **Repositories**。

   您的仓库列表出现。

3. 选择一个仓库。

   仓库的 **General** 页面出现。

4. 选择 **Settings** 标签页。
5. 在 **Image security insight settings** 下，选择 **None**。
6. 选择 **Save**。

## 静态漏洞扫描

> [!NOTE]
>
> Docker Hub 静态漏洞扫描需要 Docker Pro、Team 或 Business 订阅。

在启用静态扫描后，当您将镜像推送到 Docker Hub 仓库时，Docker Hub 会自动扫描镜像以识别漏洞。扫描结果展示扫描运行时您镜像的安全状态。

扫描结果包括：

- 漏洞来源，例如操作系统 (OS) 包和库
- 引入该漏洞的版本
- 如果可用，会提供推荐的修复版本，以解决发现的漏洞。

### Docker Hub 静态扫描的变更

从 2023 年 2 月 27 日起，Docker 更改了支持 Docker Hub 静态扫描功能的技术。静态扫描现在由 Docker 原生提供支持，而非第三方。

由于此变更，扫描现在能够比以前更细粒度地检测漏洞。这反过来意味着漏洞报告可能显示比以前更多的漏洞。如果您在 2023 年 2 月 27 日之前使用过漏洞扫描，您可能会看到新的漏洞报告列出了更多的漏洞，这是由于分析更加彻底。

您无需采取任何操作。扫描将继续正常运行，不会中断或改变价格。历史数据继续可用。

### 开启静态漏洞扫描

仓库所有者和管理员可以在仓库上启用静态漏洞扫描。如果您是 Team 或 Business 订阅的成员，请确保您要启用扫描的仓库属于 Team 或 Business 层级。

当仓库上启用了扫描时，任何具有推送权限的人都可以通过将镜像推送到 Docker Hub 来触发扫描。

要启用静态漏洞扫描：

> [!NOTE]
>
> 静态漏洞扫描支持扫描 AMD64 架构、Linux 操作系统且大小小于 10 GB 的镜像。

1. 登录到 [Docker Hub](https://hub.docker.com)。
2. 选择 **My Hub** > **Repositories**。

   您的仓库列表出现。

3. 选择一个仓库。

   仓库的 **General** 页面出现。

4. 选择 **Settings** 标签页。
5. 在 **Image security insight settings** 下，选择 **Static scanning**。
6. 选择 **Save**。

### 扫描镜像

要扫描镜像的漏洞，请将镜像推送到 Docker Hub，推送到您已开启扫描的仓库。

### 查看漏洞报告

要查看漏洞报告：

1. 登录到 [Docker Hub](https://hub.docker.com)。
2. 选择 **My Hub** > **Repositories**。

   您的仓库列表出现。

3. 选择一个仓库。

   仓库的 **General** 页面出现。
   漏洞报告可能需要几分钟才会出现在您的仓库中。

   ![Vulnerability scan report](images/vuln-scan-report.png)

4. 选择 **Tags** 标签页，然后选择 **Digest**，再选择 **Vulnerabilities** 查看详细的扫描报告。

   扫描报告显示扫描识别的漏洞，按其严重程度排序，最高严重程度列在顶部。它显示包含漏洞的包、引入漏洞的版本以及漏洞是否在后续版本中已修复的信息。

   ![Vulnerability scan details](images/vuln-scan-details.png)

有关此视图的更多信息，请参阅
[Image details view](/manuals/scout/explore/image-details-view.md)。

### 检查漏洞

漏洞报告根据严重程度对漏洞进行排序。它显示包含漏洞的包、引入漏洞的版本以及漏洞是否在后续版本中已修复的信息。

漏洞扫描报告还允许开发团队和安全负责人比较不同标签的漏洞数量，以查看漏洞是随时间减少还是增加。

### 修复漏洞

识别出漏洞列表后，您可以采取以下几种措施来修复漏洞。例如，您可以：

1. 在 Dockerfile 中指定更新的基础镜像，检查您的应用级依赖项，重建 Docker 镜像，然后将新镜像推送到 Docker Hub。
2. 重建 Docker 镜像，在操作系统包上运行更新命令，并将更新版本的镜像推送到 Docker Hub。
3. 编辑 Dockerfile 手动移除或更新包含漏洞的特定库，重建镜像，并将新镜像推送到 Docker Hub。

Docker Scout 可以为您提供改进镜像安全性的具体且上下文相关的修复步骤。更多信息，请参阅
[Docker Scout](/manuals/scout/_index.md)。

### 关闭静态漏洞扫描

仓库所有者和管理员可以禁用仓库上的静态漏洞扫描。要禁用扫描：

1. 登录到 [Docker Hub](https://hub.docker.com)。
2. 选择 **My Hub** > **Repositories**。

   您的仓库列表出现。

3. 选择一个仓库。

   仓库的 **General** 页面出现。

4. 选择 **Settings** 标签页。
5. 在 **Image security insight settings** 下，选择 **None**。
6. 选择 **Save**。