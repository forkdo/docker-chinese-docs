---
title: Docker Engine 17.11 发行说明
linkTitle: Engine v17.11
toc_min: 1
toc_max: 2
---

## 17.11.0-ce
2017-11-20

> [!IMPORTANT]
> Docker CE 17.11 是首个基于
> [containerd 1.0 beta](https://github.com/containerd/containerd/releases/tag/v1.0.0-beta.2)
> 的 Docker 发行版。Docker CE 17.11 及更高版本无法识别由之前 Docker 版本启动的容器。
> 如果您使用 Live Restore，必须在升级到 Docker CE 17.11 之前停止所有容器。
> 否则，任何由早于 17.11 的 Docker 版本启动的容器在升级后将不被 Docker 识别，
> 并在系统上保持未被管理的运行状态。

### 构建器

* 测试并修复使用 rm/force-rm 矩阵的构建 [moby/moby#35139](https://github.com/moby/moby/pull/35139)
- 修复使用 `--stream` 和大型上下文的构建 [moby/moby#35404](https://github.com/moby/moby/pull/35404)

### 客户端

* 从帮助输出中隐藏帮助标志 [docker/cli#645](https://github.com/docker/cli/pull/645)
* 支持为 compose 卷解析命名管道 [docker/cli#560](https://github.com/docker/cli/pull/560)
* [Compose] 在插值后将值转换为预期类型 [docker/cli#601](https://github.com/docker/cli/pull/601)
+ 在 `docker stack deploy` 中添加 "secrets" 和 "configs" 的输出 [docker/cli#593](https://github.com/docker/cli/pull/593)
- 修复 `--host-add` 的标志描述 [docker/cli#648](https://github.com/docker/cli/pull/648)
* 在 docker service ps --quiet 中不截断 ID [docker/cli#579](https://github.com/docker/cli/pull/579)

### 弃用

* 更新 bash 补全和同步服务更新的弃用提示 [docker/cli#610](https://github.com/docker/cli/pull/610)

### 日志

* 复制到日志驱动的 bufsize，修复 #34887 [moby/moby#34888](https://github.com/moby/moby/pull/34888)
+ 为 GELF 日志驱动添加 TCP 支持 [moby/moby#34758](https://github.com/moby/moby/pull/34758)
+ 为 awslogs 驱动添加凭据端点选项 [moby/moby#35055](https://github.com/moby/moby/pull/35055)

### 网络

- 修复删除时网络名称遮盖网络 ID 的问题 [moby/moby#34509](https://github.com/moby/moby/pull/34509)
- 将网络创建的返回错误码从 500 修复为 409 [moby/moby#35030](https://github.com/moby/moby/pull/35030)
- 修复任务失败错误 "Unable to complete atomic operation, key modified" [docker/libnetwork#2004](https://github.com/docker/libnetwork/pull/2004)

### 运行时

* 切换到 Containerd 1.0 客户端 [moby/moby#34895](https://github.com/moby/moby/pull/34895)
* 增加 Windows 上容器的默认关闭超时时间 [moby/moby#35184](https://github.com/moby/moby/pull/35184)
* LCOW: API: 在 /images/create 和 /build 中添加 `platform` [moby/moby#34642](https://github.com/moby/moby/pull/34642)
* 停止按版本过滤 Windows 清单列表 [moby/moby#35117](https://github.com/moby/moby/pull/35117)
* 使用 Azure/go-ansiterm 中的 Windows 控制台模式常量 [moby/moby#35056](https://github.com/moby/moby/pull/35056)
* Windows 守护进程应遵循 DOCKER_TMPDIR [moby/moby#35077](https://github.com/moby/moby/pull/35077)
* Windows: 修复启动日志 [moby/moby#35253](https://github.com/moby/moby/pull/35253)
+ 添加对拉取时 Windows 版本过滤的支持 [moby/moby#35090](https://github.com/moby/moby/pull/35090)
- 修复 containerd 1.0 引入回归后 LCOW 的问题 [moby/moby#35320](https://github.com/moby/moby/pull/35320)
* 移除时的 ContainerWait: 不要因 rm 失败而卡住 [moby/moby#34999](https://github.com/moby/moby/pull/34999)
* oci: 为用户命名空间守护进程遵守 CL_UNPRIVILEGED [moby/moby#35205](https://github.com/moby/moby/pull/35205)
* 设置 may_detach_mounts 时不要中止 [moby/moby#35172](https://github.com/moby/moby/pull/35172)
- 修复实时恢复容器时获取容器 PID 的 panic [moby/moby#35157](https://github.com/moby/moby/pull/35157)
- 屏蔽容器的 `/proc/scsi` 路径以防止设备被移除 (CVE-2017-16539) [moby/moby#35399](https://github.com/moby/moby/pull/35399)
* 更新到 github.com/vbatts/tar-split@v0.10.2 (CVE-2017-14992) [moby/moby#35424](https://github.com/moby/moby/pull/35424)

### Swarm 模式

* 修改集成测试以适应 swarmkit 中新的 ipam 选项 [moby/moby#35103](https://github.com/moby/moby/pull/35103)
- 修复获取 swarm 信息时的死锁 [moby/moby#35388](https://github.com/moby/moby/pull/35388)
+ 扩展 `TaskStatus` 中 `Err` 字段的范围，也涵盖阻止任务进展的非终止错误 [docker/swarmkit#2287](https://github.com/docker/swarmkit/pull/2287)

### 打包

+ 为 Debian 10 (Buster) 构建包 [docker/docker-ce-packaging#50](https://github.com/docker/docker-ce-packaging/pull/50)
+ 为 Ubuntu 17.10 (Artful) 构建包 [docker/docker-ce-packaging#55](https://github.com/docker/docker-ce-packaging/pull/55)