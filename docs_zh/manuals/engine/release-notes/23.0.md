---
title: Docker Engine 23.0 发布说明
linkTitle: Engine v23.0
description: 了解 Docker Engine 的新功能、错误修复和破坏性变更
keywords: docker, docker engine, ce, 新功能, 发布说明
toc_min: 1
toc_max: 2
---

> [!NOTE]
>
> 从 Docker Engine 23.0.0 版本开始，Buildx 被打包在独立的 `docker-buildx-plugin` 包中。
> 在早期版本中，Buildx 包含在 `docker-ce-cli` 包中。
> 当你升级到此版本的 Docker Engine 时，请确保更新所有包。例如，在 Ubuntu 上：
>
> ```console
> $ sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
> ```
>
> 有关升级 Docker Engine 的更多详细信息，请参阅你操作系统的 [Docker Engine 安装说明][1]。

[1]: ../install/_index.md

本文档描述了 Docker Engine 23.0 版本的最新变更、新增功能、已知问题和修复。

有关以下信息：

- 已弃用和移除的功能，请参阅 [已弃用的 Engine 功能](../deprecated.md)。
- Engine API 的变更，请参阅 [Engine API 版本历史](/reference/api/engine/version-history/)。

从 23.0.0 版本开始，Docker Engine 不再使用 CalVer 版本号格式，转而采用 [SemVer 版本号格式](https://semver.org/)。
更改版本格式是迈向 Go 模块兼容性的一步，但仓库尚未使用 Go 模块，仍需要使用 "+incompatible" 版本。
工作将继续推进，以在未来版本中实现 Go 模块兼容性。

## 23.0.6

{{< release-date date="2023-05-08" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 23.0.6 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A23.0.6)
- [moby/moby, 23.0.6 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A23.0.6)

### 错误修复和增强

- 修复 NFS 上 vfs 存储驱动无法工作的问题。[moby/moby#45465](https://github.com/moby/moby/pull/45465)

### 打包更新

- 升级 Go 到 `1.19.9`。[docker/docker-ce-packaging#889](https://github.com/docker/docker-ce-packaging/pull/889)，
  [docker/cli#4254](https://github.com/docker/cli/pull/4254)，[moby/moby#45455](https://github.com/moby/moby/pull/45455)
- 升级 `containerd` 到 [v1.6.21](https://github.com/containerd/containerd/releases/tag/v1.6.21)
- 升级 `runc` 到 [v1.1.7](https://github.com/opencontainers/runc/releases/tag/v1.1.7)


## 23.0.5

{{< release-date date="2023-04-26" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 23.0.5 里程碑](https://github.com/docker/cli/milestone/79?closed=1)
- [moby/moby, 23.0.5 里程碑](https://github.com/moby/moby/milestone/118?closed=1)

### 错误修复和增强

- 为 `docker volume prune` 增加 `--all` / `-a` 选项。[docker/cli#4229](https://github.com/docker/cli/pull/4229)
- 为 `docker info` 增加 `--format=json`。[docker/cli#4320](https://github.com/docker/cli/pull/4230)
- 修复 AWSLogs 日志驱动的日志丢失问题。[moby/moby#45350](https://github.com/moby/moby/pull/45350)
- 修复 v23.0.4 中引入的回归问题，当提供 fixed-cidr 配置参数但未提供 bip 时，dockerd 拒绝启动。[moby/moby#45403](https://github.com/moby/moby/pull/45403)
- 修复守护进程启动时 libnetwork 中的 panic 问题。[moby/moby#45376](https://github.com/moby/moby/pull/45376)
- 修复使用 `buildx` 构建镜像时未发送 "tag" 事件的问题。[moby/moby#45410](https://github.com/moby/moby/pull/45410)

### 打包更新

- 升级 Compose 到 `2.17.3`。[docker/docker-ce-packaging#883](https://github.com/docker/docker-ce-packaging/pull/883)

## 23.0.4

{{< release-date date="2023-04-17" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 23.0.4 里程碑](https://github.com/docker/cli/milestone/77?closed=1)
- [moby/moby, 23.0.4 里程碑](https://github.com/moby/moby/milestone/117?closed=1)

### 错误修复和增强

- 修复 Docker CLI 23.0.0 中的性能回归问题。[docker/cli#4141](https://github.com/docker/cli/pull/4141)
- 修复 `docker cp` 的进度指示器无法按预期工作的问题。[docker/cli#4157](https://github.com/docker/cli/pull/4157)
- 修复 `docker compose --file` 的 shell 补全问题。[docker/cli#4177](https://github.com/docker/cli/pull/4177)
- 修复 `daemon.json` 中 "default-address-pools" 的错误处理导致的错误。[moby/moby#45246](https://github.com/moby/moby/pull/45246)

### 打包更新

- 修复 CentOS 9 Stream 缺失的包。
- 升级 Go 到 `1.19.8`。[docker/docker-ce-packaging#878](https://github.com/docker/docker-ce-packaging/pull/878)，
  [docker/cli#4164](https://github.com/docker/cli/pull/4164)，[moby/moby#45277](https://github.com/moby/moby/pull/45277)，
  其中包含对 [CVE-2023-24537](https://github.com/advisories/GHSA-fp86-2355-v99r)、
  [CVE-2023-24538](https://github.com/advisories/GHSA-v4m2-x4rp-hv22)、
  [CVE-2023-24534](https://github.com/advisories/GHSA-8v5j-pwr7-w5f8) 和
  [CVE-2023-24536](https://github.com/advisories/GHSA-9f7g-gqwh-jpf5) 的修复


## 23.0.3

{{< release-date date="2023-04-04" >}}

> [!NOTE]
> 
> 由于 CentOS 9 Stream 的包仓库存在问题，CentOS 9 的包目前不可用。CentOS 9 的包可能会稍后添加，或作为下一个（23.0.4）补丁版本的一部分。

### 错误修复和增强

- 修复了多个可能导致 Swarm 加密覆盖网络无法维持其保证的问题，解决了 [CVE-2023-28841](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-28841)、
  [CVE-2023-28840](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-28840) 和
  [CVE-2023-28842](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-28842)。
  - 加密覆盖网络缺乏内核支持现在会报告为错误。
  - 加密覆盖网络现在会急切地设置，而不是等待多个节点附加。
  - 现在可以通过使用 `xt_bpf` 内核模块在 Red Hat Enterprise Linux 9 上使用加密覆盖网络。
  - Swarm 覆盖网络的用户应查看 [GHSA-vwm3-crmr-xfxw](https://github.com/moby/moby/security/advisories/GHSA-vwm3-crmr-xfxw)，
    以确保未发生意外暴露。

### 打包更新

- 升级 `containerd` 到 [v1.6.20](https://github.com/containerd/containerd/releases/tag/v1.6.20)。
- 升级 `runc` 到 [v1.1.5](https://github.com/opencontainers/runc/releases/tag/v1.1.5)。


## 23.0.2

{{< release-date date="2023-03-28" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 23.0.2 里程碑](https://github.com/docker/cli/milestone/75?closed=1)
- [moby/moby, 23.0.2 里程碑](https://github.com/moby/moby/milestone/114?closed=1)

### 错误修复和增强

- 完全解决检测到启用 AppArmor 的内核时对 `apparmor_parser` 缺少检查的问题。[containerd/containerd#8087](https://github.com/containerd/containerd/pull/8087)，[moby/moby#45043](https://github.com/moby/moby/pull/45043)
- 确保在生成 BuildKit buildinfo 时凭据从 Git URL 中被红化。修复了 [CVE-2023-26054](https://github.com/moby/buildkit/security/advisories/GHSA-gc89-7gcr-jxqc)。[moby/moby#45110](https://github.com/moby/moby/pull/45110)
- 修复 Dockerfile 中 `VOLUME` 行创建的匿名卷被排除在卷修剪之外的问题。[moby/moby#45159](https://github.com/moby/moby/pull/45159)
- 修复 Swarm 节点上移除卷时错误传播失败的问题。[moby/moby#45155](https://github.com/moby/moby/pull/45155)
- 通过禁用 mergeop/diffop 优化来临时解决 BuildKit `COPY --link` 中的错误。[moby/moby#45112](https://github.com/moby/moby/pull/45112)
- 正确清理子任务，当父 Swarm 作业被移除时。[moby/swarmkit#3112](https://github.com/moby/swarmkit/pull/3112)，[moby/moby#45107](https://github.com/moby/moby/pull/45107)
- 修复 Swarm 服务创建逻辑，使 GenericResource 和非默认网络可以一起使用。[moby/swarmkit#3082](https://github.com/moby/swarmkit/pull/3082)，[moby/moby#45107](https://github.com/moby/moby/pull/45107)
- 修复 Swarm CSI 支持要求 CSI 插件提供 staging 端点才能发布卷的问题。[moby/swarmkit#3116](https://github.com/moby/swarmkit/pull/3116)，[moby/moby#45107](https://github.com/moby/moby/pull/45107)
- 修复某些配置中日志缓冲导致的 panic 问题。[containerd/fifo#47](https://github.com/containerd/fifo/pull/47)，[moby/moby#45051](https://github.com/moby/moby/pull/45051)
- 将 REST 到 Swarm gRPC API 转换层中的错误日志记录级别降低到 debug 级别，以减少冗余和噪音。[moby/moby#45016](https://github.com/moby/moby/pull/45016)
- 修复容器使用 `--dns-opt` 或 `--dns-search` 创建时，当容器外部使用 `systemd-resolved` 时的 DNS 解析问题。[moby/moby#45000](https://github.com/moby/moby/pull/45000)
- 修复处理来自容器内部的 DNS 查询错误时的 panic 问题。[moby/moby#44980](https://github.com/moby/moby/pull/44980)
- 通过允许用户使用 `--size=false` 选择退出大小计算来提高 `docker ps` 的速度。[docker/cli#4107](https://github.com/docker/cli/pull/4107)
- 将 Bash 补全支持扩展到所有插件。[docker/cli#4092](https://github.com/docker/cli/pull/4092)
- 修复 Windows 上 `docker stack deploy` 在 `cmd.exe` 设置的特殊环境变量存在时失败的问题。[docker/cli#4083](https://github.com/docker/cli/pull/4083)
- 通过将空镜像标签视作与 `<none>` 相同，为未来 API 版本添加前向兼容性。[docker/cli#4065](https://github.com/docker/cli/pull/4065)
- 原子写入上下文文件以大大减少损坏概率，并改进损坏上下文的错误消息。[docker/cli#4063](https://github.com/docker/cli/pull/4063)

### 打包

- 升级 Go 到 `1.19.7`。[docker/docker-ce-packaging#857](https://github.com/docker/docker-ce-packaging/pull/857)，[docker/cli#4086](https://github.com/docker/cli/pull/4086)，[moby/moby#45137](https://github.com/moby/moby/pull/45137)
- 升级 `containerd` 到 `v1.6.19`。[moby/moby#45084](https://github.com/moby/moby/pull/45084)，[moby/moby#45099](https://github.com/moby/moby/pull/45099)
- 升级 Buildx 到 `v0.10.4`。[docker/docker-ce-packaging#855](https://github.com/docker/docker-ce-packaging/pull/855)
- 升级 Compose 到 `v2.17.2`。[docker/docker-ce-packaging#867](https://github.com/docker/docker-ce-packaging/pull/867)

## 23.0.1

{{< release-date date="2023-02-09" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 23.0.1 里程碑](https://github.com/docker/cli/milestone/73?closed=1)
- [moby/moby, 23.0.1 里程碑](https://github.com/moby/moby/milestone/113?closed=1)

### 错误修复和增强

- 修复容器在内核启用 AppArmor 但 `apparmor_parser` 不可用时无法启动的问题。[moby/moby#44942](https://github.com/moby/moby/pull/44942)
- 修复启用 BuildKit 的构建使用内联缓存导致守护进程崩溃的问题。[moby/moby#44944](https://github.com/moby/moby/pull/44944)
- 修复 BuildKit 错误加载以前版本创建的缓存层的问题。[moby/moby#44959](https://github.com/moby/moby/pull/44959)
- 修复升级前创建的 `ipvlan` 网络阻止守护进程启动的问题。[moby/moby#44937](https://github.com/moby/moby/pull/44937)
- 修复 `overlay2` 存储驱动在 `metacopy` 测试早期失败的问题，当在不支持的后备文件系统上初始化时。[moby/moby#44922](https://github.com/moby/moby/pull/44922)
- 修复在某些运行时（如 Kata Containers）下，`exec` 退出事件被误解释为容器退出的问题。[moby