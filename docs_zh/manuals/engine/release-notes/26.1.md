---
title: Docker Engine 26.1 发行说明
linkTitle: Engine v26.1
description: 了解 Docker Engine 的新功能、错误修复和破坏性变更
keywords: docker, docker engine, ce, 新功能, 发行说明
toc_min: 1
toc_max: 2
---

本文档描述了 Docker Engine 26.1 版本的最新变更、新增功能、已知问题和修复。

关于以下方面的更多信息：

- 已弃用和移除的功能，请参见 [已弃用的 Engine 功能](../deprecated.md)。
- Engine API 的变更，请参见 [Engine API 版本历史](/reference/api/engine/version-history/)。

## 26.1.4

{{< release-date date="2024-06-05" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.1.4 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.1.4)
- [moby/moby, 26.1.4 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.1.4)
- 已弃用和移除的功能，请参见 [已弃用功能](https://github.com/docker/cli/blob/v26.1.4/docs/deprecated.md)。
- Engine API 的变更，请参见 [API 版本历史](https://github.com/moby/moby/blob/v26.1.4/docs/api/version-history.md)。

### 安全性

此版本将 Go 运行时更新至 1.21.11，其中包含以下安全修复：

- [CVE-2024-24789]
- [CVE-2024-24790]
- 修复了 Addison Crump 报告的目录删除过程中的符号链接时间检查到时间使用竞态条件问题。[Addison Crump](https://github.com/addisoncrump)。

### 错误修复和增强

- 修复了在一个节点被降级后立即提升另一个节点可能导致提升失败的问题。[moby/moby#47870](https://github.com/moby/moby/pull/47870)
- 防止守护进程日志被 `superfluous response.WriteHeader call ...` 消息刷屏。[moby/moby#47843](https://github.com/moby/moby/pull/47843)
- 插件返回空钩子消息时，不再显示空提示。[docker/cli#5083](https://github.com/docker/cli/pull/5083)
- 修复了与 Visual Studio Container Tools 的兼容性问题。[docker/cli#5095](https://github.com/docker/cli/pull/5095)

### 打包更新

- 更新 containerd（仅静态二进制文件）至 [v1.7.17](https://github.com/containerd/containerd/releases/tag/v1.7.17)。[moby/moby#47841](https://github.com/moby/moby/pull/47841)
- [CVE-2024-24789], [CVE-2024-24790]：更新 Go 运行时至 1.21.11。[moby/moby#47904](https://github.com/moby/moby/pull/47904)
- 更新 Compose 至 [v2.27.1](https://github.com/docker/compose/releases/tag/v2.27.1)。[docker/docker-ce-packages#1022](https://github.com/docker/docker-ce-packaging/pull/1022)
- 更新 Buildx 至 [v0.14.1](https://github.com/docker/buildx/releases/tag/v0.14.1)。[docker/docker-ce-packages#1021](https://github.com/docker/docker-ce-packaging/pull/1021)

[CVE-2024-24789]: https://github.com/golang/go/issues/66869
[CVE-2024-24790]: https://github.com/golang/go/issues/67680

## 26.1.3

{{< release-date date="2024-05-16" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.1.3 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.1.3)
- [moby/moby, 26.1.3 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.1.3)
- 已弃用和移除的功能，请参见 [已弃用功能](https://github.com/docker/cli/blob/v26.1.3/docs/deprecated.md)。
- Engine API 的变更，请参见 [API 版本历史](https://github.com/moby/moby/blob/v26.1.3/docs/api/version-history.md)。

### 错误修复和增强

- 修复了一个阻止在 `--internal` 网络中使用 DNS 服务器的回归问题。[moby/moby#47832](https://github.com/moby/moby/pull/47832)
- 当内部 DNS 服务器自身的地址被指定为外部服务器地址时，忽略该地址以避免无效的递归。[moby/moby#47833](https://github.com/moby/moby/pull/47833)

### 打包更新

- 允许 runc 在 AppArmor 4.0.0 及更高版本的 runc 配置文件限制下终止容器。[moby/moby#47829](https://github.com/moby/moby/pull/47829)

## 26.1.2

{{< release-date date="2024-05-08" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.1.2 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.1.2)
- [moby/moby, 26.1.2 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.1.2)
- 已弃用和移除的功能，请参见 [已弃用功能](https://github.com/docker/cli/blob/v26.1.2/docs/deprecated.md)。
- Engine API 的变更，请参见 [API 版本历史](https://github.com/moby/moby/blob/v26.1.2/docs/api/version-history.md)。

### 错误修复和增强

- 修复了当容器启动失败时 CLI 进程有时会挂起的问题。[docker/cli#5062](https://github.com/docker/cli/pull/5062)

### 打包更新

- 更新 Go 运行时至 1.21.10。[moby/moby#47806](https://github.com/moby/moby/pull/47806)

## 26.1.1

{{< release-date date="2024-04-30" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.1.1 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.1.1)
- [moby/moby, 26.1.1 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.1.1)
- 已弃用和移除的功能，请参见 [已弃用功能](https://github.com/docker/cli/blob/v26.1.1/docs/deprecated.md)。
- Engine API 的变更，请参见 [API 版本历史](https://github.com/moby/moby/blob/v26.1.1/docs/api/version-history.md)。

### 错误修复和增强

- 修复了在配置 OpenTelemetry 时 `docker run -d` 打印 `context canceled` 虚假错误的问题。[docker/cli#5044](https://github.com/docker/cli/pull/5044)
- 实验性环境变量 `DOCKER_BRIDGE_PRESERVE_KERNEL_LL=1` 将阻止守护进程删除 Linux 网桥上的内核分配的链路本地地址。[moby/moby#47775](https://github.com/moby/moby/pull/47775)
- 解决了在 `/proc/sys/net` 文件系统为只读的主机上阻止容器创建的问题。如果由于此原因无法在接口上禁用 IPv6，请在主机上默认禁用 IPv6 或确保 `/proc/sys/net` 可读写。要绕过此错误，请在启动 Docker 守护进程之前设置环境变量 `DOCKER_ALLOW_IPV6_ON_IPV4_INTERFACE=1`。[moby/moby#47769](https://github.com/moby/moby/pull/47769)

> [!NOTE]
>
> `DOCKER_ALLOW_IPV6_ON_IPV4_INTERFACE` 是作为临时修复添加的，将在未来的重大版本中逐步淘汰，届时 IPv6 启用过程将得到改进。

### 打包更新

- 更新 BuildKit 至 [v0.13.2](https://github.com/moby/buildkit/releases/tag/v0.13.2)。[moby/moby#47762](https://github.com/moby/moby/pull/47762)
- 更新 Compose 至 [v2.27.0](https://github.com/docker/compose/releases/tag/v2.27.0)。[docker/docker-ce-packages#1017](https://github.com/docker/docker-ce-packaging/pull/1017)


## 26.1.0

{{< release-date date="2024-04-22" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.1.0 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.1.0)
- [moby/moby, 26.1.0 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.1.0)
- 已弃用和移除的功能，请参见 [已弃用功能](https://github.com/docker/cli/blob/v26.1.0/docs/deprecated.md)。
- Engine API 的变更，请参见 [API 版本历史](https://github.com/moby/moby/blob/v26.1.0/docs/api/version-history.md)。

### 新功能

- 添加了可配置的 OpenTelemetry 工具和命令的基本检测功能。
  更多信息，请参见 [Docker CLI 的 OpenTelemetry](https://docs.docker.com/config/otel)。[docker/cli#4889](https://github.com/docker/cli/pull/4889)

### 错误修复和增强

- 原生 Windows 容器配置了内部 DNS 服务器用于容器名称解析，以及外部 DNS 服务器用于其他查找。
  并非所有解析器（包括 `nslookup`）在从内部服务器收到 `SERVFAIL` 响应时都会回退到外部解析器。
  因此，内部 DNS 服务器现在可以通过在 `daemon.json` 文件中设置 `feature` 选项来配置为将请求转发到外部解析器：

  ```json
  {
    "features": {
      "windows-dns-proxy": true
    }
  }
  ```

  [moby/moby#47584](https://github.com/moby/moby/pull/47584)

  > [!NOTE]
  >
  > - 这将成为 Docker Engine 27.0 的新默认行为。
  > - `windows-dns-proxy` 功能标志将在未来的版本中移除。

- Swarm：修复了 `Subpath` 未传递给容器配置的问题。[moby/moby#47711](https://github.com/moby/moby/pull/47711)
- 经典构建器：修复了 `WORKDIR <directory>/` 构建步骤（目录带尾随斜杠）的缓存未命中问题。[moby/moby#47723](https://github.com/moby/moby/pull/47723)
- containerd 镜像存储：修复了当存储中的任何镜像具有意外目标时 `docker images` 失败的问题。[moby/moby#47738](https://github.com/moby/moby/pull/47738)