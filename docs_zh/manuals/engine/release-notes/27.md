---
title: Docker Engine 版本 27 发布说明
linkTitle: Engine v27
description: 了解 Docker Engine 的最新功能、错误修复和破坏性变更
keywords: docker, docker engine, ce, 新功能, 发布说明
toc_min: 1
toc_max: 2
tags:
  - 发布说明
aliases:
- /engine/release-notes/27.1/
- /engine/release-notes/27.2/
- /engine/release-notes/27.3/
- /engine/release-notes/27.4/
- /engine/release-notes/27.5/
---

本文档描述了 Docker Engine 版本 27 的最新变更、新增功能、已知问题和修复。

有关以下内容的更多信息：

- 已弃用和移除的功能，请参见 [已弃用的 Engine 功能](../deprecated.md)。
- Engine API 的变更，请参见 [Engine API 版本历史](/reference/api/engine/version-history/)。

## 27.5

Docker Engine 版本 27.5 发布的发布说明。

### 27.5.1

{{< release-date date="2025-01-22" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 27.5.1 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A27.5.1)
- [moby/moby, 27.5.1 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A27.5.1)


#### 错误修复和功能增强

- 修复了一个问题，该问题可能导致在默认网桥初始化失败后永久阻止守护进程启动。[moby/moby#49307](https://github.com/moby/moby/pull/49307)
- 添加了 `DOCKER_IGNORE_BR_NETFILTER_ERROR` 环境变量。将其设置为 `1` 允许在无法加载 `br_netfilter` 的主机上运行。某些功能将无法工作，包括在网桥网络中禁用容器间通信。在禁用用户空间代理的情况下，将无法从同一网络上的另一个容器访问一个容器的已发布端口。[moby/moby#49306](https://github.com/moby/moby/pull/49306)

#### 打包更新

- 将 Go 运行时更新到 1.22.11（修复 CVE-2024-45341、CVE-2024-45336）。[moby/moby#49312](https://github.com/moby/moby/pull/49312)、[docker/docker-ce-packaging#1147](https://github.com/docker/docker-ce-packaging/pull/1147)、[docker/cli#5762](https://github.com/docker/cli/pull/5762)
- 将 RootlessKit 更新到 v2.3.2 以支持 `passt` >= 2024_10_30.ee7d0b6。[moby/moby#49304](https://github.com/moby/moby/pull/49304)
- 将 Buildx 更新到 [v0.20.0](https://github.com/docker/buildx/releases/tag/v0.20.0)。[docker/docker-ce-packaging#1149](https://github.com/docker/docker-ce-packaging/pull/1149)


### 27.5.0

{{< release-date date="2025-01-13" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 27.5.0 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A27.5.0)
- [moby/moby, 27.5.0 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A27.5.0)

#### 错误修复和功能增强

- containerd 镜像存储：修复了通过 tarball 向 `/build` 端点传递构建上下文的问题。[moby/moby#49194](https://github.com/moby/moby/pull/49194)
- 没有 `keepStorage` 值的构建器垃圾回收策略现在按预期继承 `defaultKeepStorage` 限制。[moby/moby#49137](https://github.com/moby/moby/pull/49137)
- 在守护进程启动期间保留网络标签。[moby/moby#49200](https://github.com/moby/moby/pull/49200)
- 修复了删除容器时可能出现的竞争条件错误。[moby/moby#49239](https://github.com/moby/moby/pull/49239)

#### Go SDK

- `pkg/sysinfo`：弃用 `NumCPU`。此工具的行为与 `runtime.NumCPU` 相同。[moby/moby#49247](https://github.com/moby/moby/pull/49247)
- `pkg/fileutils`：弃用 `GetTotalUsedFds`：此函数仅在内部使用，将在下一个版本中移除。[moby/moby#49209](https://github.com/moby/moby/pull/49209)
- `pkg/ioutils`：弃用 `BytesPipe`、`NewBytesPipe`、`ErrClosed`、`WriteCounter`、`NewWriteCounter`、`NewReaderErrWrapper`、`NopFlusher`、`NopWriter`、`NopWriteCloser`。它们仅在内部使用，将在下一个版本中移除。[moby/moby#49246](https://github.com/moby/moby/pull/49246)、[moby/moby#49255](https://github.com/moby/moby/pull/49255)
- `pkg/reexec`：此包已弃用并移至单独的模块。请使用 `github.com/moby/sys/reexec`。[moby/moby#49135](https://github.com/moby/moby/pull/49135)

#### 打包更新
- 将 containerd 更新到 [v1.7.25](https://github.com/containerd/containerd/releases/tag/v1.7.25) [moby/moby#49253](https://github.com/moby/moby/pull/49253)
- 将 `runc` 更新到 [v1.2.4](https://github.com/opencontainers/runc/releases/tag/v1.2.4) [moby/moby#49243](https://github.com/moby/moby/pull/49243)
- 将 BuildKit 更新到 [v0.18.2](https://github.com/moby/buildkit/releases/tag/v0.18.2) [moby/moby#48949](https://github.com/moby/moby/pull/48949)
- 将 Compose 更新到 [v2.32.2](https://github.com/docker/compose/releases/tag/v2.32.2) [docker/docker-ce-packaging#1140](https://github.com/docker/docker-ce-packaging/pull/1140)

## 27.4

Docker Engine 版本 27.4 发布的发布说明。

### 27.4.1

{{< release-date date="2024-12-18" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 27.4.1 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A27.4.1)
- [moby/moby, 27.4.1 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A27.4.1)

#### 错误修复和功能增强

- 修复了在未配置 OTel 时过度分配内存的问题。[moby/moby#49079](https://github.com/moby/moby/pull/49079)
- `docker info` 命令和相应的 `GET /info` API 端点现在不再包含当 `bridge-nf-call-iptables` 或 `bridge-nf-call-ip6tables` 在守护进程启动时被禁用时的警告。现在在需要时会尝试加载 `br_netfilter` 内核模块，这使得这些警告不再准确。[moby/moby#49090](https://github.com/moby/moby/pull/49090)
- 在需要时尝试加载内核模块，包括 `ip6_tables` 和 `br_netfilter`，使用一种可能在 Docker-in-Docker 容器内成功的方法。[moby/moby#49043](https://github.com/moby/moby/pull/49043)
- 修复了一个错误，该错误可能导致在失败时 iptables `DOCKER FILTER` 链未被清理。[moby/moby#49110](https://github.com/moby/moby/pull/49110)

#### 打包更新

- 将 Compose 更新到 [v2.32.1](https://github.com/docker/compose/releases/tag/v2.32.1)。[docker/docker-ce-packaging#1130](https://github.com/docker/docker-ce-packaging/pull/1130)
- 将 Buildx 更新到 [v0.19.3](https://github.com/docker/buildx/releases/tag/v0.19.3)。[docker/docker-ce-packaging#1132](https://github.com/docker/docker-ce-packaging/pull/1132)
- 将 runc（仅静态二进制文件）更新到 [v1.2.3](https://github.com/opencontainers/runc/releases/tag/v1.2.3) [moby/moby#49085](https://github.com/moby/moby/pull/49085)

### 27.4.0

{{< release-date date="2024-12-09" >}}


有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 27.4.0 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A27.4.0)
- [moby/moby, 27.4.0 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A27.4.0)

#### API

- `GET /images/json` 在启用 `manifests` 选项时现在保留清单索引中清单出现的原始顺序。[moby/moby#48712](https://github.com/moby/moby/pull/48712)

#### 错误修复和功能增强

- 使用 `jsonfile` 或 `local` 日志驱动程序读取日志时，如果尝试读取或解析底层日志文件时出现任何错误，将跳过文件的其余部分并移动到下一个日志文件（如果存在），而不是向客户端返回错误并关闭流。错误可以在 Docker 守护进程日志中查看，并在配置跟踪时导出到跟踪。[moby/moby#48842](https://github.com/moby/moby/pull/48842)
- 读取日志文件时，压缩日志文件现在仅在需要时解压缩，而不是在开始日志流之前解压缩所有文件。[moby/moby#48842](https://github.com/moby/moby/pull/48842)
- 修复了一个问题，即如果内核的 `br_netfilter` 模块未加载且启用，当 `userland-proxy` 禁用时，网桥网络上一个容器的已发布端口无法从同一网络上的另一个容器访问。守护进程现在将在创建禁用用户空间代理的网络时尝试加载模块并启用 `bridge-nf-call-iptables` 或 `bridge-nf-call-ip6tables`。[moby/moby#48685](https://github.com/moby/moby/pull/48685)
- 修复了 `bridge` 和 `br_netfilter` 内核模块的加载。[moby/moby#48966](https://github.com/moby/moby/pull/48966)
- containerd 镜像存储：修复了在使用 containerd 快照器和许多构建/镜像时，Docker 守护进程因"上下文截止时间超时"错误而无法完全启动的问题。[moby/moby#48954](https://github.com/moby/moby/pull/48954)
- containerd 镜像存储：修复了部分拉取的镜像未被垃圾回收的问题。[moby#48910](https://github.com/moby/moby/pull/48910)、[moby/moby#48957](https://github.com/moby/moby/pull/48957)
- containerd 镜像存储：修复了 `docker image inspect` 在 `RepoDigests` 中输出重复引用的问题。[moby/moby#48785](https://github.com/moby/moby/pull/48785)
- containerd 镜像存储：修复了在 HTTPS 请求因非 TLS 相关错误而失败时，无法连接到某些不安全注册表的问题。[moby/moby#48758](https://github.com/moby/moby/pull/48758)
- containerd 镜像存储：移除了对标记非悬空镜像时的混淆警告日志。[moby/moby#49010](https://github.com/moby/moby/pull/49010)
- containerd 镜像存储：在 `docker image ls --tree` 中不要下划线名称。[docker/cli#5519](https://github.com/docker/cli/pull/5519)
- containerd 镜像存储：将 `docker image ls --tree` 中 `USED` 列的名称更改为 `IN USE`。[docker/cli#5518](https://github.com/docker/cli/pull/5518)
- `dockerd-rootless-setuptool.sh install --force` 现在忽略 RootlessKit 错误 [moby/moby#48695](https://github.com/moby/moby/pull/48695)
- 为分配给网桥网络所属网桥的地址禁用 IPv6 重复地址检测 (DAD)。[moby/moby#48684](https://github.com/moby/moby/pull/48684)
- 移除 BuildKit 初始化超时。[moby/moby#48963](https://github.com/moby/moby/pull/48963)
- 在 ZFS 上移除数据集时忽略"数据集不存在"错误。[moby/moby#48968](https://github.com/moby/moby/pull/48968)
- 客户端：防止空闲连接泄漏 FD。[moby/moby#48764](https://github.com/moby/moby/pull/48764)
- 修复通过 `--mount` 选项创建的匿名卷未被标记为匿名的问题。[moby/moby#48755](https://github.com/moby/moby/pull/48755)
- 在使用 live-restore 重启守护进程后，确保在其他规则之前放置一个跳转到 `DOCKER-USER` 链的 iptables 规则。[moby/moby#48714](https://github.com/moby/moby/pull/48714)
- 修复了由 OTel 计量器引起的可能内存泄漏。[moby/moby#48693](https://github.com/moby/moby/pull/48693)
- 为每个镜像存储创建独立的构建历史数据库。[moby/moby#48688](https://github.com/moby/moby/pull/48688)
- 修复了一个导致在紧密循环中进行 DNS 解析时过度使用内存的问题。[moby/moby#48840](https://github.com/moby/moby/pull/48840)
- 修复了阻止在 `docker run` 期间取消镜像拉取的错误。[docker/cli#5654](https://github.com/docker/cli/pull/5654)
- `docker login` 和 `docker logout` 命令现在在凭据未更改时不再更新配置文件。[docker/cli#5569](https://github.com/docker/cli/pull/5569)
- 优化 `docker stats` 以减少闪烁问题。[docker/cli#5588](https://github.com/docker/cli/pull/5588)、[docker/cli#5635](https://github.com/docker/cli/pull/5635)
- 修复了无法访问的插件路径阻止插件被检测到的问题。[docker/cli#5652](https://github.com/docker/cli/pull/5652)
- 为 cobra 生成的 shell 补全添加对 `events --filter` 的支持。[docker/cli#5614](https://github.com/docker/cli/pull/5614)
- 修复 `events --filter daemon=` 的 bash 补全。[docker/cli#5563](https://github.com/docker/cli/pull/