---
title: Docker Engine 17.03 发布说明
linkTitle: Engine v17.03
toc_min: 1
toc_max: 2
---

## 17.03.3-ce
2018-08-30

### 运行时

* 更新 go-connections 至 d217f8e [#28](https://github.com/docker/engine/pull/28)

## 17.03.2-ce
2017-05-29

### 网络

- 修复阻止网络创建的并发问题 [#33273](https://github.com/moby/moby/pull/33273)

### 运行时

- 重新标记 secrets 路径以避免在启用 selinux 的系统上出现权限拒绝错误 [#33236](https://github.com/moby/moby/pull/33236)（参考 [#32529](https://github.com/moby/moby/pull/32529)）
- 修复本地卷在需要时未正确重新标记的情况 [#33236](https://github.com/moby/moby/pull/33236)（参考 [#29428](https://github.com/moby/moby/pull/29428)）
- 修复升级过程中插件根文件系统仍被挂载时的问题 [#33236](https://github.com/moby/moby/pull/33236)（参考 [#32525](https://github.com/moby/moby/pull/32525)）
- 修复卷未默认使用 `rprivate` 传播模式的问题 [#33236](https://github.com/moby/moby/pull/33236)（参考 [#32851](https://github.com/moby/moby/pull/32851)）
- 修复因无法获取卷驱动程序而可能导致的 panic [#33236](https://github.com/moby/moby/pull/33236)（参考 [#32347](https://github.com/moby/moby/pull/32347)）
+ 在 `docker info` 中添加警告，当 `overlay` 或 `overlay2` graphdriver 在不支持 `d_type` 的文件系统上使用时 [#33236](https://github.com/moby/moby/pull/33236)（参考 [#31290](https://github.com/moby/moby/pull/31290)）
- 修复向旧卷回退挂载规格时的问题 [#33207](https://github.com/moby/moby/pull/33207)
- 修复失败的卸载可能导致本地卷删除时数据丢失的问题 [#33120](https://github.com/moby/moby/pull/33120)

### Swarm 模式

- 修复任务可能意外被终止的情况 [#33118](https://github.com/moby/moby/pull/33118)
- 修复即使所需镜像本地存在，但因无法访问注册表而无法部署服务的问题 [#33117](https://github.com/moby/moby/pull/33117)

## 17.03.1-ce
2017-03-27

### 远程 API (v1.27) 和客户端

* 修复旧版 API 上的自动移除功能 [#31692](https://github.com/docker/docker/pull/31692)
* 修复堆栈的默认网络自定义 [#31258](https://github.com/docker/docker/pull/31258/)
* 修复在存在离线 CPU 和较新 Linux 系统时 CPU 使用率计算错误 [#31802](https://github.com/docker/docker/pull/31802)
* 修复远程 API 中服务健康检查为 `{}` 的问题 [#30197](https://github.com/docker/docker/pull/30197)

### 运行时

* 更新 runc 至 54296cf40ad8143b62dbcaa1d90e520a2136ddfe [#31666](https://github.com/docker/docker/pull/31666)
 * 忽略 cgroup2 挂载点 [opencontainers/runc#1266](https://github.com/opencontainers/runc/pull/1266)
* 更新 containerd 至 4ab9917febca54791c5f071a9d1f404867857fcc [#31662](https://github.com/docker/docker/pull/31662) [#31852](https://github.com/docker/docker/pull/31852)
 * 在调用 restore() 之前注册健康检查服务 [docker/containerd#609](https://github.com/docker/containerd/pull/609)
* 修复无人值守升级后重新加载 apparmor 配置文件导致 `docker exec` 无法工作的问题 [#31773](https://github.com/docker/docker/pull/31773)
* 修复 Overlay2 未挂载合并目录的层 [#31069](https://github.com/docker/docker/pull/31069)
* 强制删除时不忽略“卷正在使用”错误 [#31450](https://github.com/docker/docker/pull/31450)

### Swarm 模式

* 更新 swarmkit 至 17756457ad6dc4d8a639a1f0b7a85d1b65a617bb [#31807](https://github.com/docker/docker/pull/31807)
 * 调度器现在能正确考虑已分配给节点但尚未运行的任务 [docker/swarmkit#1980](https://github.com/docker/swarmkit/pull/1980)
 * 允许在只有已终止任务引用网络时移除网络 [docker/swarmkit#2018](https://github.com/docker/swarmkit/pull/2018)
 * 减少对失败网络分配的重试频率 [docker/swarmkit#2021](https://github.com/docker/swarmkit/pull/2021)
 * 避免为不再运行的任务分配网络 [docker/swarmkit#2017](https://github.com/docker/swarmkit/pull/2017)
 * 网络分配器内部簿记的修复 [docker/swarmkit#2019](https://github.com/docker/swarmkit/pull/2019) [docker/swarmkit#2020](https://github.com/docker/swarmkit/pull/2020)

### Windows

* 恢复时清理 HCS [#31503](https://github.com/docker/docker/pull/31503)

## 17.03.0-ce
2017-03-01

> [!IMPORTANT]
>
> 从本次发布开始，Docker 进入月度发布周期，并使用新的 YY.MM 版本号方案来反映这一点。提供两个发布渠道：月度和季度。任何给定的月度发布仅在下一个月度发布可用之前接收安全和错误修复。季度发布在首次发布后 4 个月内接收安全和错误修复。本次发布包含针对 1.13.1 的错误修复，但没有主要功能添加，API 版本保持不变。从 Docker 1.13.1 升级到 17.03.0 预期是简单且低风险的。

### 客户端

* 修复 `docker stats --format` 中的 panic [#30776](https://github.com/docker/docker/pull/30776)

### 贡献

* 更新各种 `bash` 和 `zsh` 补全脚本 [#30823](https://github.com/docker/docker/pull/30823)、[#30945](https://github.com/docker/docker/pull/30945) 等...
* 在默认 seccomp 配置文件中阻止过时的 socket 协议族 - 缓解未打补丁内核的 CVE-2017-6074 [#29076](https://github.com/docker/docker/pull/29076)

### 网络

* 修复跨数据中心 swarm 中覆盖网络加密密钥轮换的错误 [#30727](https://github.com/docker/docker/pull/30727)
* 修复覆盖网络加密和网络控制平面通信失败（“没有安装的密钥可以解密消息”）的副作用 panic，该问题出现在频繁的 swarm 领袖重新选举时 [#25608](https://github.com/docker/docker/pull/25608)
* 使用外部 kv-store 的覆盖网络在系统响应和数据路径编程方面的多个修复 [docker/libnetwork#1639](https://github.com/docker/libnetwork/pull/1639)、[docker/libnetwork#1632](https://github.com/docker/libnetwork/pull/1632) 等...
* 丢弃发往加密覆盖网络的纯 vxlan 数据包 [#31170](https://github.com/docker/docker/pull/31170)
* 在分配失败时释放网络附件 [#31073](https://github.com/docker/docker/pull/31073)
* 修复多个发布端口映射到同一目标端口时的端口分配 [docker/swarmkit#1835](https://github.com/docker/swarmkit/pull/1835)

### 运行时

* 修复 docker logs 中的死锁 [#30223](https://github.com/docker/docker/pull/30223)
* 修复等待日志写入事件时的 CPU 占用 [#31070](https://github.com/docker/docker/pull/31070)
* 修复使用 journald 时可能发生的崩溃 [#31231](https://github.com/docker/docker/pull/31231) [#31263](https://github.com/docker/docker/pull/31263)
* 修复关闭 nil channel 时的 panic [#31274](https://github.com/docker/docker/pull/31274)
* 修复 `--volumes-from` 在 `docker run` 中的重复挂载点 [#29563](https://github.com/docker/docker/pull/29563)
* 修复 `--cache-from` 不缓存最后一步的问题 [#31189](https://github.com/docker/docker/pull/31189)

### Swarm 模式

* 容器从未启动时，关闭操作泄漏错误 [#31279](https://github.com/docker/docker/pull/31279)
* 修复在领袖故障转移期间任务可能卡在“NEW”状态的可能性 [docker/swarmkit#1938](https://github.com/docker/swarmkit/pull/1938)
* 修复全局服务的额外任务创建问题，该问题导致 `docker service ls` 中的副本计数令人困惑 [docker/swarmkit#1957](https://github.com/docker/swarmkit/pull/1957)
* 修复当 `task-history-limit` 设置为 1 时导致滚动更新变慢的问题 [docker/swarmkit#1948](https://github.com/docker/swarmkit/pull/1948)
* 如果任务因节点不再满足约束而关闭，则在适当的情况下在其他位置重新启动任务 [docker/swarmkit#1958](https://github.com/docker/swarmkit/pull/1958)
* （实验性）