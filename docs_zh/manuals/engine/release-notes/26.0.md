---
title: Docker Engine 26.0 发行说明
linkTitle: Engine v26.0
description: 了解 Docker Engine 的新功能、错误修复和破坏性变更
keywords: docker, docker engine, ce, 新功能, 发行说明
toc_min: 1
toc_max: 2
---

本文档描述了 Docker Engine 26.0 版本的最新变更、新增功能、已知问题和修复。

有关以下内容的更多信息：

- 已弃用和移除的功能，请参阅 [已弃用的 Engine 功能](../deprecated.md)。
- Engine API 的变更，请参阅 [Engine API 版本历史](/reference/api/engine/version-history/)。

## 26.0.2

{{< release-date date="2024-04-18" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.0.2 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.0.2)
- [moby/moby, 26.0.2 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.0.2)
- 已弃用和移除的功能，请参阅 [已弃用的功能](https://github.com/docker/cli/blob/v26.0.2/docs/deprecated.md)。
- Engine API 的变更，请参阅 [API 版本历史](https://github.com/moby/moby/blob/v26.0.2/docs/api/version-history.md)。

### 安全性

此版本包含对 [CVE-2024-32473] 的安全修复，该问题是 IPv4-only 接口上的意外 IPv6 配置。

### 错误修复和增强

- [CVE-2024-32473]：确保引擎只为分配了 IPv4 地址的接口禁用 IPv6。[moby#GHSA-x84c-p2g9-rqv9](https://github.com/moby/moby/security/advisories/GHSA-x84c-p2g9-rqv9)

  [CVE-2024-32473]: https://github.com/moby/moby/security/advisories/GHSA-x84c-p2g9-rqv9

## 26.0.1

{{< release-date date="2024-04-11" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.0.1 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.0.1)
- [moby/moby, 26.0.1 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.0.1)
- 已弃用和移除的功能，请参阅 [已弃用的功能](https://github.com/docker/cli/blob/v26.0.1/docs/deprecated.md)。
- Engine API 的变更，请参阅 [API 版本历史](https://github.com/moby/moby/blob/v26.0.1/docs/api/version-history.md)。

### 错误修复和增强

- 修复了一个回归问题，该问题导致网络接口特定的 `--sysctl` 选项阻止容器启动。[moby/moby#47646](https://github.com/moby/moby/pull/47646)
- 从 `docker save` 输出的镜像 `config` OCI 描述符中移除错误的 `platform`。[moby/moby#47694](https://github.com/moby/moby/pull/47694)
- containerd 镜像存储：`docker save` 生成的 OCI 归档现在将在 `index.json` 中包含非空的 `mediaType` 字段。[moby/moby#47701](https://github.com/moby/moby/pull/47701)
- 修复了一个回归问题，该问题阻止内部解析器将来自 IPvlan L3 网络的请求转发到外部解析器。[moby/moby#47705](https://github.com/moby/moby/pull/47705)
- 阻止在未指定父接口的 IPvlan 和 Macvlan 网络中使用外部解析器。[moby/moby#47705](https://github.com/moby/moby/pull/47705)

### 打包更新

- 更新 Go 运行为 1.21.9 [moby/moby#47671](https://github.com/moby/moby/pull/47671)，[docker/cli#4987](https://github.com/docker/cli/pull/4987)
- 更新 Compose 到 [v1.26.1](https://github.com/docker/compose/releases/tag/v2.26.1)，[docker/docker-ce-packaging#1009](https://github.com/docker/docker-ce-packaging/pull/1009)
- 更新 containerd 到 [v1.7.15](https://github.com/containerd/containerd/releases/tag/v1.7.15)（仅静态二进制文件）[moby/moby#47692](https://github.com/moby/moby/pull/47692)

## 26.0.0

{{< release-date date="2024-03-20" >}}

有关此版本的完整 Pull Request 和变更列表，请参考相关的 GitHub 里程碑：

- [docker/cli, 26.0.0 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A26.0.0)
- [moby/moby, 26.0.0 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A26.0.0)
- 已弃用和移除的功能，请参阅 [已弃用的功能](https://github.com/docker/cli/blob/v26.0.0/docs/deprecated.md)。
- Engine API 的变更，请参阅 [API 版本历史](https://github.com/moby/moby/blob/v26.0.0/docs/api/version-history.md)。

### 新增功能

- 在 `VolumeOptions` 中添加 `Subpath` 字段，使得可以挂载卷的子路径。[moby/moby#45687](https://github.com/moby/moby/pull/45687)
- 在挂载标志中添加 `volume-subpath` 支持（`--mount type=volume,...,volume-subpath=<subpath>`）。[docker/cli#4331](https://github.com/docker/cli/pull/4331)
- 在 `docker stack deploy` 的 Compose 文件中接受 `=` 分隔符和 `[ipv6]`。[docker/cli#4860](https://github.com/docker/cli/pull/4860)
- rootless：通过将 `DOCKERD_ROOTLESS_ROOTLESSKIT_DISABLE_HOST_LOOPBACK` 环境变量设置为 `false`（默认为 `true`）来添加启用主机回环的支持。这允许容器通过使用 IP 地址 `10.0.2.2` 连接到主机。[moby/moby#47352](https://github.com/moby/moby/pull/47352)
- containerd 镜像存储：`docker image ls` 不再为多平台镜像创建重复条目。[moby/moby#45967](https://github.com/moby/moby/pull/45967)
- containerd 镜像存储：发送 Prometheus 指标。[moby/moby#47555](https://github.com/moby/moby/pull/47555)

### 错误修复和增强

- [CVE-2024-29018]：不将请求转发到仅连接到“internal”网络的容器的外部 DNS 服务器。之前，如果主机的 DNS 服务器运行在回环地址上（如 systemd 的 127.0.0.53），请求会被转发。[moby/moby#47589](https://github.com/moby/moby/pull/47589)
- 确保在容器重启时不会恢复生成的 MAC 地址，但配置的 MAC 地址会被保留。[moby/moby#47233](https://github.com/moby/moby/pull/47233)

  > [!WARNING]
  >
  > 使用 Docker Engine 25.0.0 创建的容器可能有重复的 MAC 地址，必须重新创建。
  > 使用版本 25.0.0 或 25.0.1 创建并配置了用户定义 MAC 地址的容器在使用 25.0.2 启动时将获得生成的 MAC 地址。它们也必须重新创建。

- 始终尝试在容器的回环接口上启用 IPv6，只有成功时才在 `/etc/hosts` 中包含 IPv6。[moby/moby#47062](https://github.com/moby/moby/pull/47062)

  > [!NOTE]
  >
  > 默认情况下，当容器未连接到启用 IPv6 的网络时，IPv6 在容器的回环接口上保持启用。
  > 例如，仅连接到仅 IPv4 网络的容器现在在其回环接口上有 `::1` 地址。
  >
  > 要在容器中禁用 IPv6，
  > 在 `create` 或 `run` 命令中使用选项 `--sysctl net.ipv6.conf.all.disable_ipv6=1`，
  > 或在 Compose 文件的服务配置部分使用等效的 `sysctls` 选项。
  >
  > 如果由于明确禁用了容器的 IPv6，或主机的网络栈未启用 IPv6（或由于任何其他原因）导致容器中不可用 IPv6，
  > 容器的 `/etc/hosts` 文件将不包含 IPv6 条目。

- 修复 `ADD` Dockerfile 指令在将带有 xattrs 的归档解包到不支持它们的文件系统时失败，错误为 `lsetxattr <file>: operation not supported`。[moby/moby#47175](https://github.com/moby/moby/pull/47175)
- 修复使用 `--checkpoint` 时 `docker container start` 失败的问题。[moby/moby#47456](https://github.com/moby/moby/pull/47456)
- 恢复主机和内部桥接网络上的容器之间的 IP 连接。[moby/moby#47356](https://github.com/moby/moby/pull/47356)
- 不对现有 swarm 网络强制执行新的验证规则。[moby/moby#47361](https://github.com/moby/moby/pull/47361)
- 恢复 Windows 上默认“nat”网络中容器的 DNS 名称。[moby/moby#47375](https://github.com/moby/moby/pull/47375)
- 在使用模糊参数调用 `docker image ls` 时打印提示。[docker/cli#4849](https://github.com/docker/cli/pull/4849)
- 清理 OpenBSD 上的 `@docker_cli_[UUID]` 文件。[docker/cli#4862](https://github.com/docker/cli/pull/4862)
- 添加明确的[弃用通知](https://github.com/docker/cli/blob/v26.0.0/docs/deprecated.md#unauthenticated-tcp-connections)消息，当使用未加密的远程 TCP 连接时。[docker/cli#4928](https://github.com/docker/cli/pull/4928)，[moby/moby#47556](https://github.com/moby/moby/pull/47556)
- 使用主机 `resolv.conf` 中的 IPv6 名称服务器作为 Docker Engine 内部 DNS 的上游解析器，而不是将它们列在容器的 `resolv.conf` 中。[moby/moby#47512](https://github.com/moby/moby/pull/47512)
- containerd 镜像存储：当使用 `--userns-remap` 选项时，隔离具有不同 containerd 命名空间的镜像。[moby/moby#46786](https://github.com/moby/moby/pull/46786)
- containerd 镜像存储：修复镜像拉取不发出 `Pulling fs layer` 状态的问题。[moby/moby#47432](https://github.com/moby/moby/pull/47432)

### API

- 为了保持向后兼容性，当使用较旧的客户端（API 版本 < v1.44）时，只读挂载默认不是递归的。[moby/moby#47391](https://github.com/moby/moby/pull/47391)
- 如果镜像配置中缺少 `Created` 字段，`GET /images/{id}/json` 会省略该字段（之前是 `0001-01-01T00:00:00Z`）。[moby/moby#47451](https://github.com/moby/moby/pull/47451)
- 对于 API 版本 <= 1.43，在 `GET /images/{id}/json` 中用 `0001-01-01T00:00:00Z` 填充缺失的 `Created` 字段。[moby/moby#47387](https://github.com/moby/moby/pull/47387)
- `POST /images/search` 端点结果中的 `is_automated` 字段现在始终为 `false`。因此，搜索 `is-automated=true` 将不会产生结果，而 `is-automated=false` 将是无操作。[moby/moby#47465](https://github.com/moby/moby/pull/47465)
- 从 `GET /images/{name}/json` 响应中移除 `Container` 和 `ContainerConfig` 字段。[moby/moby#47430](https://github.com/moby/moby/pull/47430)

### 打包更新

- 更新 BuildKit 到 [v0.13.1](https://github.com/moby/buildkit/releases/tag/v0.13.1)。[moby/moby#47582](https://github.com/moby/moby/pull/47582)
- 更新 Buildx 到 [v0.13.1](https://github.com/docker/buildx/releases/tag/v0.13.1)。[docker/docker-ce-packaging#1000](https://github.com/docker/docker-ce-packaging/pull/1000)
- 更新 Compose 到 [v2.25.0](https://github.com/docker/compose/releases/tag/v2.25.0)。[docker/docker-ce-packaging#1002](https://github.com/docker/docker-ce-packaging/pull/1002)
- 更新 Go 运行为 [1.21.8](https://go.dev/doc/devel/release#go1.21.8)。[moby/moby#47502](https://github.com/moby/moby/pull/47502)
- 更新 RootlessKit 到 [v2.0.2](https://github.com/rootless-containers/rootlesskit/releases/tag/v2.0.2)。[moby/moby#47508](https://github.com/moby/moby/pull/47504)
- 更新 containerd 到 v1.7.13（仅静态二进制文件）[moby/moby#47278](https://github.com/moby/moby/pull/47278)
- 更新 runc 二进制文件到 v1.1.12 [moby/moby#47268](https://github.com/moby/moby/pull/47268)
- 更新 OTel 到 v0.46.1 / v1.21.0 [moby/moby#47245](https://github.com/moby/moby/pull/47245)

### 移除

- 从 `GET /images/{name}/json` 响应中移除 `Container` 和 `ContainerConfig` 字段。[moby/moby#47430](https://github.com/moby/moby/pull/47430)
- 弃用接受未加密远程 TCP 连接的能力。[弃用通知](https://github.com/docker/cli/tree/v26.0.0/deprecation.md#unauthenticated-tcp-connections) [docker/cli#4928](https://github.com/docker/cli/pull/4928) [moby/moby#47556](https://github.com/moby/moby/pull/47556)。
- 移除已弃用的 API 版本（API < v1.24）[moby/moby#47155](https://github.com/moby/moby/pull/47155)
- 默认禁用拉取已弃用的镜像格式。这些镜像格式已弃用，支持将在未来版本中移除。[moby/moby#47459](https://github.com/moby/moby/pull/47459)
- image：移除已弃用的 IDFromDigest [moby/moby#47