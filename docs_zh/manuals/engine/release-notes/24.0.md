---
title: Docker Engine 24.0 发布说明
linkTitle: Engine v24.0
description: 了解 Docker Engine 的新功能、错误修复和破坏性变更
keywords: docker, docker engine, ce, 新功能, 发布说明
toc_min: 1
toc_max: 2
---

本文档描述了 Docker Engine 24.0 版本的最新变更、新增内容、已知问题和修复。

关于以下内容的更多信息：

- 已弃用和已移除的功能，请参见 [已弃用的 Engine 功能](../deprecated.md)。
- Engine API 的变更，请参见 [Engine API 版本历史](/reference/api/engine/version-history/)。

## 24.0.9

{{< release-date date="2024-01-31" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 24.0.9 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A24.0.9)
- [moby/moby, 24.0.9 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A24.0.9)

## 安全性

此版本包含对以下影响 Docker Engine 及其组件的 CVE 的安全修复。

| CVE                                                         | 组件     | 修复版本 | 严重程度         |
| ----------------------------------------------------------- | -------- | -------- | ---------------- |
| [CVE-2024-21626](https://scout.docker.com/v/CVE-2024-21626) | runc     | 1.1.12   | 高，CVSS 8.6     |
| [CVE-2024-24557](https://scout.docker.com/v/CVE-2024-24557) | Docker Engine | 24.0.9 | 中，CVSS 6.9     |

> [!IMPORTANT]
>
> 请注意，此版本的 Docker Engine 不包含对 BuildKit 中以下已知漏洞的修复：
>
> - [CVE-2024-23651](https://scout.docker.com/v/CVE-2024-23651)
> - [CVE-2024-23652](https://scout.docker.com/v/CVE-2024-23652)
> - [CVE-2024-23653](https://scout.docker.com/v/CVE-2024-23653)
> - [CVE-2024-23650](https://scout.docker.com/v/CVE-2024-23650)
>
> 要解决这些漏洞，
> 请升级到 [Docker Engine v25.0.2](./25.0.md#2502)。

有关此版本解决的安全问题以及 BuildKit 中未解决的漏洞的详细信息，
请参阅
[博客文章](https://www.docker.com/blog/docker-security-advisory-multiple-vulnerabilities-in-runc-buildkit-and-moby/)。

有关每个漏洞的详细信息，请参阅相关的安全公告：

- [CVE-2024-21626](https://github.com/opencontainers/runc/security/advisories/GHSA-xr7r-f8xq-vfvv)
- [CVE-2024-24557](https://github.com/moby/moby/security/advisories/GHSA-xw73-rw38-6vjc)

### 包更新

- 升级 runc 到 [v1.1.12](https://github.com/opencontainers/runc/releases/tag/v1.1.12)。 [moby/moby#47269](https://github.com/moby/moby/pull/47269)
- 升级 containerd 到 [v1.7.13](https://github.com/containerd/containerd/releases/tag/v1.7.13)（仅静态二进制文件）。 [moby/moby#47280](https://github.com/moby/moby/pull/47280)

## 24.0.8

{{< release-date date="2024-01-25" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 24.0.8 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A24.0.8)
- [moby/moby, 24.0.8 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A24.0.8)

### 错误修复和增强
* 实时恢复：使用自动移除（`docker run --rm`）的容器在引擎重启时不再被强制移除。 [moby/moby#46857](https://github.com/moby/moby/pull/46869)

### 包更新
* 升级 Go 到 `go1.20.13`。 [moby/moby#47054](https://github.com/moby/moby/pull/47054), [docker/cli#4826](https://github.com/docker/cli/pull/4826), [docker/docker-ce-packaging#975](https://github.com/docker/docker-ce-packaging/pull/975)
* 升级 containerd（仅静态二进制文件）到 [v1.7.12](https://github.com/containerd/containerd/releases/tag/v1.7.12) [moby/moby#47096](https://github.com/moby/moby/pull/47096)
* 升级 runc 到 v1.1.11。 [moby/moby#47010](https://github.com/moby/moby/pull/47010)

## 24.0.7

{{< release-date date="2023-10-27" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 24.0.7 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A24.0.7)
- [moby/moby, 24.0.7 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A24.0.7)

### 错误修复和增强

* 原子化写入 overlay2 层元数据。 [moby/moby#46703](https://github.com/moby/moby/pull/46703)
* 修复 systemd 250 及更高版本上的“Rootful-in-Rootless” Docker-in-Docker。 [moby/moby#46626](https://github.com/moby/moby/pull/46626)
* 修复用户名包含反斜杠时的 `dockerd-rootless-setuptools.sh`。 [moby/moby#46407](https://github.com/moby/moby/pull/46407)
* 修复一个错误，该错误会阻止在停止没有网络附件的容器时完全删除网络沙箱，当使用 `dockerd --bridge=none` 时。 [moby/moby#46702](https://github.com/moby/moby/pull/46702)
* 修复取消 API 请求可能中断容器重启的错误。 [moby/moby#46697](https://github.com/moby/moby/pull/46697)
* 修复在提供 `--ip-range` 且范围大于子网时容器无法启动的问题。 [docker/for-mac#6870](https://github.com/docker/for-mac/issues/6870)
* 修复 zstd 输出的数据损坏问题。 [moby/moby#46709](https://github.com/moby/moby/pull/46709)
* 修复应用容器 MAC 地址的条件。 [moby/moby#46478](https://github.com/moby/moby/pull/46478)
* 提升统计信息收集器的性能。 [moby/moby#46448](https://github.com/moby/moby/pull/46448)
* 修复源策略规则最终出现在错误顺序的问题。 [moby/moby#46441](https://github.com/moby/moby/pull/46441)

### 包更新

* 添加对 Fedora 39 和 Ubuntu 23.10 的支持。 [docker/docker-ce-packaging#940](https://github.com/docker/docker-ce-packaging/pull/940), [docker/docker-ce-packaging#955](https://github.com/docker/docker-ce-packaging/pull/955)
* 修复卸载 `docker-ce` RPM 包时 `docker.socket` 不会被禁用的问题。 [docker/docker-ce-packaging#852](https://github.com/docker/docker-ce-packaging/pull/852)
* 升级 Go 到 `go1.20.10`。 [docker/docker-ce-packaging#951](https://github.com/docker/docker-ce-packaging/pull/951)
* 升级 containerd 到 `v1.7.6`（仅静态二进制文件）。 [moby/moby#46103](https://github.com/moby/moby/pull/46103)
* 升级 `containerd.io` 包到 [`v1.6.24`](https://github.com/containerd/containerd/releases/tag/v1.6.24)。

### 安全性

* 默认拒绝容器访问 `/sys/devices/virtual/powercap`。此变更加固了对
  [CVE-2020-8694](https://scout.docker.com/v/CVE-2020-8694)、
  [CVE-2020-8695](https://scout.docker.com/v/CVE-2020-8695) 和
  [CVE-2020-12912](https://scout.docker.com/v/CVE-2020-12912) 的防护，
  以及一种称为 [PLATYPUS 攻击](https://platypusattack.com/) 的攻击。

  详细信息请参阅
  [公告](https://github.com/moby/moby/security/advisories/GHSA-jq35-85cj-fj4p)、
  [提交](https://github.com/moby/moby/commit/c9ccbfad11a60e703e91b6cca4f48927828c7e35)。

## 24.0.6

{{< release-date date="2023-09-05" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 24.0.6 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A24.0.6)
- [moby/moby, 24.0.6 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A24.0.6)

### 错误修复和增强

* containerd 存储后端：修复当容器镜像在内容存储中不再存在时 `docker ps` 失败的问题。 [moby/moby#46095](https://github.com/moby/moby/pull/46095)
* containerd 存储后端：修复当容器镜像配置在内容存储中不再存在时 `docker ps -s -a` 和 `docker container prune` 失败的问题。 [moby/moby#46097](https://github.com/moby/moby/pull/46097)
* containerd 存储后端：修复当容器镜像配置在内容存储中不再（或从未）存在时 `docker inspect` 失败的问题。 [moby/moby#46244](https://github.com/moby/moby/pull/46244)
* containerd 存储后端：通过使用引用计数的 rootfs 挂载修复 `overlayfs` 快照器的 diff 和 export。 [moby/moby#46266](https://github.com/moby/moby/pull/46266)
* containerd 存储后端：修复当本地可用的镜像平台与所需平台不匹配时的误导性错误消息。 [moby/moby#46300](https://github.com/moby/moby/pull/46300)
* containerd 存储后端：修复经典构建器中 `FROM scratch` Dockerfile 指令。 [moby/moby#46302](https://github.com/moby/moby/pull/46302)
* containerd 存储后端：修复经典构建器中的 `mismatched image rootfs and manifest layers` 错误。 [moby/moby#46310](https://github.com/moby/moby/pull/46310)
* 警告从所有注册表拉取 Docker Image Format v1 和 Docker Image manifest version 2, schema 1 镜像。 [moby/moby#46290](https://github.com/moby/moby/pull/46290)
* 修复具有自定义卷选项的卷的实时恢复。 [moby/moby#46366](https://github.com/moby/moby/pull/46366)
* 修复以非 root 用户运行容器时错误丢弃能力位的问题（注意：此变更已通过回归有效存在）。 [moby/moby#46221](https://github.com/moby/moby/pull/46221)
* 修复网络隔离 iptables 规则阻止容器之间交换 IPv6 邻居请求包的问题。 [moby/moby#46214](https://github.com/moby/moby/pull/46214)
* 修复 Windows 上当前目录中的 `dockerd.exe --register-service` 不工作的问题。 [moby/moby#46215](https://github.com/moby/moby/pull/46215)
* 在 CLI 的 `docker login` 对 Docker Hub 进行认证时添加提示建议使用 PAT。 [docker/cli#4500](https://github.com/docker/cli/pull/4500)
* 通过改进 Bash 补全来提升 CLI 用户的 Shell 启动速度。 [docker/cli#4517](https://github.com/docker/cli/pull/4517)
* 通过在可能时跳过 `GET /_ping` 来提升某些命令的速度。 [docker/cli#4508](https://github.com/docker/cli/pull/4508)
* 修复使用 PAT 对 Docker Hub 上的镜像执行 `docker manifest inspect` 时凭据范围的问题。 [docker/cli#4512](https://github.com/docker/cli/pull/4512)
* 修复 `docker events` 不支持 `--format=json` 的问题。 [docker/cli#4544](https://github.com/docker/cli/pull/4544)

### 包更新

* 升级 Go 到 `go1.20.7`。 [moby/moby#46140](https://github.com/moby/moby/pull/46140), [docker/cli#4476](https://github.com/docker/cli/pull/4476), [docker/docker-ce-packaging#932](https://github.com/docker/docker-ce-packaging/pull/932)
* 升级 containerd 到 `v1.7.3`（仅静态二进制文件）。 [moby/moby#46103](https://github.com/moby/moby/pull/46103)
* 升级 Compose 到 `v2.21.0`。 [docker/docker-ce-packaging#936](https://github.com/docker/docker-ce-packaging/pull/936)

## 24.0.5

{{< release-date date="2023-07-24" >}}

有关此版本的完整 Pull Request 和变更列表，请参阅相关的 GitHub 里程碑：

- [docker/cli, 24.0.5 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A24.0.5)
- [moby/moby, 24.0.5 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A24.0.5)

### 错误修复和增强

* Go 客户端现在避免在 HTTP `Host:` 头中使用 UNIX 套接字路径，以兼容 `go1.20.6` 中引入的变更。 [moby/moby#45962](https://github.com/moby/moby/pull/45962), [moby/moby#45990](https://github.com/moby/moby/pull/45990)
* containerd 存储后端：修复 `Variant` 在 `docker image inspect` 和 `GET /images/{name}/json` 中未包含的问题。 [moby/moby#46025](https://github.com/moby/moby/pull/46025)
* containerd 存储后端：防止镜像导出期间内容的潜在垃圾回收。 [moby/moby#46021](https://github.com/moby/moby/pull/46021)
*