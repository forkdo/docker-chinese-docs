---
title: Docker Engine 18.05 发行说明
linkTitle: Engine v18.05
toc_min: 1
toc_max: 2
---

## 18.05.0-ce
2018-05-09

### 构建器

*  在 `pkg/term` 包中添加 `netbsd` 兼容性。[moby/moby#36887](https://github.com/moby/moby/pull/36887)
*  将中间构建产物的输出路径标准化为 `/build/`。[moby/moby#36858](https://github.com/moby/moby/pull/36858)

### 客户端

- 修复 `docker stack deploy` 引用标志。[docker/cli#981](https://github.com/docker/cli/pull/981)
- 修复在服务使用 `--force` 更新后，docker stack deploy 重新部署服务的问题。[docker/cli#963](https://github.com/docker/cli/pull/963)
+ 为 `secret|config create --template-driver` 添加 bash 补全。[docker/cli#1004](https://github.com/docker/cli/pull/1004)
+ 为 docker trust 子命令添加 fish 补全。[docker/cli#984](https://github.com/docker/cli/pull/984)
- 修复 docker history 的 `--format` 示例。[docker/cli#980](https://github.com/docker/cli/pull/980)
- 修复使用网络合并 composefile 时的错误。[docker/cli#983](https://github.com/docker/cli/pull/983)

### 日志

* 标准化存储驱动日志消息的属性。[moby/moby#36492](https://github.com/moby/moby/pull/36492)
* 改进日志记录器中的部分消息支持。[moby/moby#35831](https://github.com/moby/moby/pull/35831)

### 网络

- 允许更大的预设属性值，不覆盖现有值。[docker/libnetwork#2124](https://github.com/docker/libnetwork/pull/2124)
- networkdb: 在 handleNodeEvent 中使用写锁。[docker/libnetwork#2136](https://github.com/docker/libnetwork/pull/2136)
* 导入 libnetwork 修复滚动更新的补丁。[moby/moby#36638](https://github.com/moby/moby/pull/36638)
* 更新 libnetwork 以提高桥接网络隔离规则的可扩展性。[moby/moby#36774](https://github.com/moby/moby/pull/36774)
- 修复误用的网络对象名称。[moby/moby#36745](https://github.com/moby/moby/pull/36745)

### 运行时

* LCOW: 实现 `docker save`。[moby/moby#36599](https://github.com/moby/moby/pull/36599)
* Pkg: devmapper: 动态加载 dm_task_deferred_remove。[moby/moby#35518](https://github.com/moby/moby/pull/35518)
* Windows: 在图驱动中添加 GetLayerPath 实现。[moby/moby#36738](https://github.com/moby/moby/pull/36738)
- 修复写入失败时的 Windows 层泄漏。[moby/moby#36728](https://github.com/moby/moby/pull/36728)
- 修复在用户命名空间中运行时的 FIFO、套接字和设备文件。[moby/moby#36756](https://github.com/moby/moby/pull/36756)
- 修复 docker version 输出对齐。[docker/cli#965](https://github.com/docker/cli/pull/965)
* 使用特权时始终使 sysfs 可读写。[moby/moby#36808](https://github.com/moby/moby/pull/36808)
* 升级 Golang 至 1.10.1。[moby/moby#35739](https://github.com/moby/moby/pull/35739)
* 升级 containerd 客户端。[moby/moby#36684](https://github.com/moby/moby/pull/36684)
* 升级 golang.org/x/net 至 go1.10 发布提交。[moby/moby#36894](https://github.com/moby/moby/pull/36894)
* Context.WithTimeout: 调用取消函数。[moby/moby#36920](https://github.com/moby/moby/pull/36920)
* 复制：避免在使用 authz 插件时占用所有系统内存。[moby/moby#36595](https://github.com/moby/moby/pull/36595)
* 守护进程/集群：在配置期间处理部分附加条目。[moby/moby#36769](https://github.com/moby/moby/pull/36769)
* 不要使容器挂载不可绑定。[moby/moby#36768](https://github.com/moby/moby/pull/36768)
* 关机前额外检查是否需要卸载。[moby/moby#36879](https://github.com/moby/moby/pull/36879)
* 将挂载解析移至单独的包。[moby/moby#36896](https://github.com/moby/moby/pull/36896)
* 不使用全局卷驱动存储。[moby/moby#36637](https://github.com/moby/moby/pull/36637)
* Pkg/mount 改进。[moby/moby#36091](https://github.com/moby/moby/pull/36091)
* 放宽一些 libcontainerd 客户端锁定。[moby/moby#36848](https://github.com/moby/moby/pull/36848)
* 移除守护进程对 API 包的依赖。[moby/moby#36912](https://github.com/moby/moby/pull/36912)
* 移除服务更新的重试。[moby/moby#36827](https://github.com/moby/moby/pull/36827)
* 恢复未加密存储的警告提示。[docker/cli#1008](https://github.com/docker/cli/pull/1008)
* 在 `directory.Size()` 中支持取消操作。[moby/moby#36734](https://github.com/moby/moby/pull/36734)
* 从 x/net/context 切换到 context。[moby/moby#36904](https://github.com/moby/moby/pull/36904)
* 修复检查 Content-type 是否为 `application/json` 的函数。[moby/moby#36778](https://github.com/moby/moby/pull/36778)
+ 添加默认的 pollSettings 配置函数。[moby/moby#36706](https://github.com/moby/moby/pull/36706)
+ 在对 daemonWaitCh 执行接收操作前添加 if 判断。[moby/moby#36651](https://github.com/moby/moby/pull/36651)
- 修复非 root 用户运行卷测试时的问题。[moby/moby#36935](https://github.com/moby/moby/pull/36935)

### Swarm 模式

* RoleManager 将从集群成员资格中移除检测到的节点 [docker/swarmkit#2548](https://github.com/docker/swarmkit/pull/2548)
* 调度器/任务回收器：处理标记为关闭但未分配的任务 [docker/swarmkit#2574](https://github.com/docker/swarmkit/pull/2574)
* 避免预定义的错误日志。[docker/swarmkit#2561](https://github.com/docker/swarmkit/pull/2561)
* 任务回收器应删除已移除但尚未分配的任务槽位。[docker/swarmkit#2557](https://github.com/docker/swarmkit/pull/2557)
* Agent 报告 FIPS 状态。[docker/swarmkit#2587](https://github.com/docker/swarmkit/pull/2587)
- 修复：timeMutex 关键操作在临界区外。[docker/swarmkit#2603](https://github.com/docker/swarmkit/pull/2603)
* 在引擎配置中公开 swarmkit 的 Raft 调优参数。[moby/moby#36726](https://github.com/moby/moby/pull/36726)
* 使 internal/test/daemon.Daemon 具备 Swarm 感知能力。[moby/moby#36826](https://github.com/moby/moby/pull/36826)