---
title: Docker Engine 25.0 发行说明
linkTitle: Engine v25.0
description: 了解 Docker Engine 的新功能、错误修复和破坏性变更
keywords: docker, docker engine, ce, 新功能, 发行说明
toc_min: 1
toc_max: 2
---

本文档描述了 Docker Engine 25.0 版本的最新变更、新增功能、已知问题和修复。

关于更多信息：

- 已弃用和已移除的功能，请参见 [已弃用的 Engine 功能](../deprecated.md)。
- Engine API 的变更，请参见 [Engine API 版本历史](/reference/api/engine/version-history/)。

## 25.0.5

{{< release-date date="2024-03-19" >}}

有关此版本的完整 Pull Request 和变更列表，请参见相关的 GitHub 里程碑：

- [docker/cli, 25.0.5 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A25.0.5)
- [moby/moby, 25.0.5 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A25.0.5)

### 安全性

此版本包含 [CVE-2024-29018] 的安全修复，这是一个通过权威 DNS 服务器从“内部”网络泄露数据的潜在漏洞。

### 错误修复和增强

- [CVE-2024-29018]：对于仅连接到“内部”网络的容器，不向外部 DNS 服务器转发请求。之前，如果主机的 DNS 服务器运行在回环地址（如 systemd 的 127.0.0.53）上，请求会被转发。[moby/moby#47589](https://github.com/moby/moby/pull/47589)
- 插件：修复在 UserNS 中运行时挂载 /etc/hosts 的问题。[moby/moby#47588](https://github.com/moby/moby/pull/47588)
- 无根模式：修复 `open /etc/docker/plugins: permission denied`。[moby/moby#47587](https://github.com/moby/moby/pull/47587)
- 修复多个并行 `docker build` 运行导致磁盘空间泄漏的问题。[moby/moby#47527](https://github.com/moby/moby/pull/47527)

  [CVE-2024-29018]: https://github.com/moby/moby/security/advisories/GHSA-mq39-4gv4-mvpx

## 25.0.4

{{< release-date date="2024-03-07" >}}

有关此版本的完整 Pull Request 和变更列表，请参见相关的 GitHub 里程碑：

- [docker/cli, 25.0.4 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A25.0.4)
- [moby/moby, 25.0.4 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A25.0.4)

### 错误修复和增强

- 恢复 Windows 上默认“nat”网络中容器的 DNS 名称。[moby/moby#47490](https://github.com/moby/moby/pull/47490)
- 修复使用 `--checkpoint` 时 `docker start` 失败的问题。[moby/moby#47466](https://github.com/moby/moby/pull/47466)
- 不对现有 swarm 网络强制执行新的验证规则。[moby/moby#47482](https://github.com/moby/moby/pull/47482)
- 恢复内部桥接网络上主机和容器之间的 IP 连通性。[moby/moby#47481](https://github.com/moby/moby/pull/47481)
- 修复 v25.0 中引入的回归问题，该问题阻止经典构建器添加使用非 Linux 操作系统创建的带有 `xattrs` 的 tar 归档文件。[moby/moby#47483](https://github.com/moby/moby/pull/47483)
- containerd 镜像存储：修复镜像拉取时不发出 `Pulling fs layer status` 的问题。[moby/moby#47484](https://github.com/moby/moby/pull/47484)
- API：为保持向后兼容性，使用较旧客户端（API 版本 < v1.44）时，默认将只读挂载设为非递归。[moby/moby#47393](https://github.com/moby/moby/pull/47393)
- API：如果镜像配置中缺少 `Created` 字段，`GET /images/{id}/json` 将省略该字段（之前为 `0001-01-01T00:00:00Z`）。[moby/moby#47451](https://github.com/moby/moby/pull/47451)
- API：对于 API 版本 <= 1.43，在 `GET /images/{id}/json` 中用 `0001-01-01T00:00:00Z` 填充缺失的 `Created` 字段。[moby/moby#47387](https://github.com/moby/moby/pull/47387)
- API：修复导致 API 套接字连接失败报告 API 版本协商失败的回归问题。[moby/moby#47470](https://github.com/moby/moby/pull/47470)
- API：当指定容器范围的 MAC 地址，但 `NetworkMode` 名称或 ID 与 `NetworkSettings.Networks` 中使用的名称或 ID 不同时，保留容器创建 API 请求中提供的端点配置。[moby/moby#47510](https://github.com/moby/moby/pull/47510)

### 打包更新

- 升级 Go 运行为 1.21.8。[moby/moby#47503](https://github.com/moby/moby/pull/47503)
- 升级 RootlessKit 到 v2.0.2。[moby/moby#47508](https://github.com/moby/moby/pull/47508)
- 升级 Compose 到 v2.24.7。[docker/docker-ce-packaging#998](https://github.com/moby/moby/pull/998)
- 升级 Buildx 到 v0.13.0。[docker/docker-ce-packaging#997](https://github.com/moby/moby/pull/997)

## 25.0.3

{{< release-date date="2024-02-06" >}}

有关此版本的完整 Pull Request 和变更列表，请参见相关的 GitHub 里程碑：

- [docker/cli, 25.0.3 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A25.0.3)
- [moby/moby, 25.0.3 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A25.0.3)

### 错误修复和增强

- containerd 镜像存储：修复 `docker image history` 在内容存储中找不到清单时失败的错误。[moby/moby#47348](https://github.com/moby/moby/pull/47348)
- 确保容器停止并重启时重新生成基于容器 IP 地址的 MAC 地址，以防生成的 IP/MAC 地址被重用。[moby/moby#47304](https://github.com/moby/moby/pull/47304)

  > [!NOTE]
  >
  > - 使用 Docker Engine 25.0.0 版本创建的容器可能有重复的 MAC 地址。
  >   它们必须重新创建。
  > - 使用 Docker Engine 25.0.0 或 25.0.1 版本创建的带有用户定义 MAC 地址的容器
  >   在使用 Docker Engine 25.0.2 版本启动时会收到新的 MAC 地址。
  >   它们也必须重新创建。

- 修复 `docker save <image>@<digest>` 生成没有清单的 OCI 归档文件的问题。[moby/moby#47294](https://github.com/moby/moby/pull/47294)
- 修复在 RHEL 和 CentOS 7 上创建 MTU 高于 1500 的桥接网络的错误。[moby/moby#47308](https://github.com/moby/moby/issues/47308), [moby/moby#47311](https://github.com/moby/moby/pull/47311)
- 修复容器无法在 `internal` 网络上通信的错误。[moby/moby#47303](https://github.com/moby/moby/pull/47303)
- 修复 `ipv6` 守护进程选项值被忽略的错误。[moby/moby#47310](https://github.com/moby/moby/pull/47310)
- 修复尝试使用摘要修订安装拉取时导致恐慌的错误。[moby/moby#47323](https://github.com/moby/moby/pull/47323)
- 修复托管 containerd 监督器中的潜在竞争条件。[moby/moby#47313](https://github.com/moby/moby/pull/47313)
- 修复 `journald` 日志驱动程序的问题，该问题阻止容器日志在 systemd 255 版本中正确跟随。[moby/moby#47243](https://github.com/moby/moby/pull/47243)
- seccomp：更新内置 seccomp 配置文件，包含内核 v5.17 - v6.7 中新增的系统调用，以与 containerd 使用的配置文件保持一致。[moby/moby#47341](https://github.com/moby/moby/pull/47341)
- Windows：修复基于早于主机版本的 Windows 版本构建镜像时缓存不被使用的问题。[moby/moby#47307](https://github.com/moby/moby/pull/47307), [moby/moby#47337](https://github.com/moby/moby/pull/47337)

### 打包更新

- 移除对 Ubuntu Lunar (23.04) 的支持。[docker/ce-packaging#986](https://github.com/docker/docker-ce-packaging/pull/986)

## 25.0.2

{{< release-date date="2024-01-31" >}}

有关此版本的完整 Pull Request 和变更列表，请参见相关的 GitHub 里程碑：

- [docker/cli, 25.0.2 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A25.0.2)
- [moby/moby, 25.0.2 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A25.0.2)

### 安全性

此版本包含对以下 CVE 的安全修复，
影响 Docker Engine 及其组件。

| CVE                                                         | 组件     | 修复版本 | 严重程度         |
| ----------------------------------------------------------- | ------------- | ----------- | ---------------- |
| [CVE-2024-21626](https://scout.docker.com/v/CVE-2024-21626) | runc          | 1.1.12      | 高，CVSS 8.6   |
| [CVE-2024-23651](https://scout.docker.com/v/CVE-2024-23651) | BuildKit      | 1.12.5      | 高，CVSS 8.7   |
| [CVE-2024-23652](https://scout.docker.com/v/CVE-2024-23652) | BuildKit      | 1.12.5      | 高，CVSS 8.7   |
| [CVE-2024-23653](https://scout.docker.com/v/CVE-2024-23653) | BuildKit      | 1.12.5      | 高，CVSS 7.7   |
| [CVE-2024-23650](https://scout.docker.com/v/CVE-2024-23650) | BuildKit      | 1.12.5      | 中，CVSS 5.5 |
| [CVE-2024-24557](https://scout.docker.com/v/CVE-2024-24557) | Docker Engine | 25.0.2      | 中，CVSS 6.9 |

上述漏洞的潜在影响包括：

- 未经授权访问主机文件系统
- 破坏构建缓存的完整性
- 对于 CVE-2024-21626，可能导致完全容器逃逸的场景

有关此版本解决的安全问题的更多信息，
请参见 [博客文章](https://www.docker.com/blog/docker-security-advisory-multiple-vulnerabilities-in-runc-buildkit-and-moby/)。
有关每个漏洞的详细信息，请参见相关的安全公告：

- [CVE-2024-21626](https://github.com/opencontainers/runc/security/advisories/GHSA-xr7r-f8xq-vfvv)
- [CVE-2024-23651](https://github.com/moby/buildkit/security/advisories/GHSA-m3r6-h7wv-7xxv)
- [CVE-2024-23652](https://github.com/moby/buildkit/security/advisories/GHSA-4v98-7qmw-rqr8)
- [CVE-2024-23653](https://github.com/moby/buildkit/security/advisories/GHSA-wr6v-9f75-vh2g)
- [CVE-2024-23650](https://github.com/moby/buildkit/security/advisories/GHSA-9p26-698r-w4hx)
- [CVE-2024-24557](https://github.com/moby/moby/security/advisories/GHSA-xw73-rw38-6vjc)

### 打包更新

- 升级 containerd 到 [v1.6.28](https://github.com/containerd/containerd/releases/tag/v1.6.28)。
- 升级 containerd 到 v1.7.13（仅静态二进制文件）。[moby/moby#47280](https://github.com/moby/moby/pull/47280)
- 升级 runc 到 v1.1.12。[moby/moby#47269](https://github.com/moby/moby/pull/47269)
- 升级 Compose 到 v2.24.5。[docker/docker-ce-packaging#985](https://github.com/docker/docker-ce-packaging/pull/985)
- 升级 BuildKit 到 v0.12.5。[moby/moby#47273](https://github.com/moby/moby/pull/47273)

## 25.0.1

{{< release-date date="2024-01-23" >}}

有关此版本的完整 Pull Request 和变更列表，请参见相关的 GitHub 里程碑：

- [docker/cli, 25.0.1 里程碑](https://github.com/docker/cli/issues?q=is%3Aclosed+milestone%3A25.0.1)
- [moby/moby, 25.0.1 里程碑](https://github.com/moby/moby/issues?q=is%3Aclosed+milestone%3A25.0.1)

### 错误修复和增强

- API：修复在 Docker Engine v25.0 升级之前创建的具有无效网络配置的容器的错误 HTTP 状态码。[moby/moby#47159](https://github.com/moby/moby/pull/47159)
- 确保当容器停止并重启时，基于容器 IP 地址的 MAC 地址会重新生成，以防生成的 IP/MAC 地址被重用。[moby/moby#47171](https://github.com/moby/moby/pull/47171)
- 修复在构建期间未通过配置设置 `host-gateway-ip` 时无法工作的问题。[moby/moby#47192](https://github.com/moby/moby/pull/47192)
- 修复容器无法重命名两次的错误。[moby/moby#47196](https://github.com/moby/moby/pull/47196)
- 修复检查容器时，容器