---
title: Docker Engine 20.10 发行说明
linkTitle: Engine v20.10
description: 了解 Docker Engine 版本 20.10 的最新功能、错误修复和重大变更
keywords: docker, docker engine, ce, 新功能, 发行说明
toc_min: 1
toc_max: 2
---

本文档描述了 Docker Engine 版本 20.10 的最新变更、新增功能、已知问题和修复。

## 20.10.24
{{< release-date date="2023-04-04" >}}

### 更新

- 将 Go 运行时更新至 [1.19.7](https://go.dev/doc/devel/release#go1.19.minor)。
- 将 Docker Buildx 更新至 [v0.10.4](https://github.com/docker/buildx/releases/tag/v0.10.4)。
- 将 containerd 更新至 [v1.6.20](https://github.com/containerd/containerd/releases/tag/v1.6.20)。
- 将 runc 更新至 [v1.1.5](https://github.com/opencontainers/runc/releases/tag/v1.1.5)。

### 错误修复和增强

- 修复了多个可能导致 Swarm 加密覆盖网络无法维持其保证的问题，解决了 [CVE-2023-28841](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-28841)、[CVE-2023-28840](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-28840) 和 [CVE-2023-28842](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-28842)。
  - 加密覆盖网络缺少内核支持现在会报告为错误。
  - 加密覆盖网络现在会急切地设置，而不是等待多个节点附加。
  - 通过使用 `xt_bpf` 内核模块，加密覆盖网络现在可在 Red Hat Enterprise Linux 9 上使用。
  - 使用 Swarm 覆盖网络的用户应查看 [GHSA-vwm3-crmr-xfxw](https://github.com/moby/moby/security/advisories/GHSA-vwm3-crmr-xfxw) 以确保未发生意外暴露。
- 升级 github.com/containerd/fifo 到 v1.1.0 以修复潜在的 panic [moby/moby#45216](https://github.com/moby/moby/pull/45242)。
- 修复已安装 cli-plugins 的 Bash 补全缺失问题 [docker/cli#4091](https://github.com/docker/cli/pull/4091)。

## 20.10.23
{{< release-date date="2023-01-19" >}}

此版本的 Docker Engine 包含更新版本的 Docker Compose、Docker Buildx、containerd 和一些小的错误修复和增强。

### 更新

- 将 Docker Compose 更新至 [v2.15.1](https://github.com/docker/compose/releases/tag/v2.15.1)。
- 将 Docker Buildx 更新至 [v0.10.0](https://github.com/docker/buildx/releases/tag/v0.10.0)。
- 将 containerd（`containerd.io` 包）更新至 [v1.6.15](https://github.com/containerd/containerd/releases/tag/v1.6.15)。
- 更新 `docker-compose-cli` 的包版本格式以允许分发版本更新 [docker/docker-ce-packaging#822](https://github.com/docker/docker-ce-packaging/pull/822)。
- 将 Go 运行时更新至 [1.18.10](https://go.dev/doc/devel/release#go1.18.minor)。

### 错误修复和增强

- 修复了使用 `--add-host=host.docker.internal:host-gateway` 且启用 BuildKit 时 `docker build` 失败的问题 [moby/moby#44650](https://github.com/moby/moby/pull/44650)。
- 恢复 seccomp：在默认配置文件中阻止 `AF_VSOCK` 的 socket 调用 [moby/moby#44712](https://github.com/moby/moby/pull/44712)。

  此变更有利于安全性，但导致某些用例的行为变更。因此，我们恢复此更改以确保受影响用户的稳定性和兼容性。

  然而，使用容器中 `AF_VSOCK` 的用户应认识到，此（特殊）地址族在当前 Linux 内核的任何版本中均未命名空间化，可能导致意外行为，例如容器直接与主机管理程序通信。

  未来版本将过滤 `AF_VSOCK`。需要允许容器通过未命名空间化的 `AF_VSOCK` 通信的用户需要关闭 seccomp 限制或设置自定义 seccomp 配置文件。

## 20.10.22
{{< release-date date="2022-12-16" >}}

此版本的 Docker Engine 包含更新版本的 Docker Compose、Docker Scan、containerd 和一些小的错误修复和增强。

### 更新

- 将 Docker Compose 更新至 [v2.14.1](https://github.com/docker/compose/releases/tag/v2.14.1)。
- 将 Docker Scan 更新至 [v0.23.0](https://github.com/docker/scan-cli-plugin/releases/tag/v0.23.0)。
- 将 containerd（`containerd.io` 包）更新至 [v1.6.13](https://github.com/containerd/containerd/releases/tag/v1.6.13)，以包含对 [CVE-2022-23471](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23471) 的修复。
- 将 Go 运行时更新至 [1.18.9](https://go.dev/doc/devel/release#go1.18.minor)，以包含对 [CVE-2022-41716](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-41716)、[CVE-2022-41717](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-41717) 和 [CVE-2022-41720](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-41720) 的修复。

### 错误修复和增强

- 改进了尝试拉取不受支持的镜像格式或 OCI 工件时的错误消息 [moby/moby#44413](https://github.com/moby/moby/pull/44413)、[moby/moby#44569](https://github.com/moby/moby/pull/44569)。
- 修复了在为容器选择随机端口时忽略主机临时端口范围的问题 [moby/moby#44476](https://github.com/moby/moby/pull/44476)。
- 修复了在使用 OpenSSH 8.9 或更高版本的主机上 `docker build` 期间出现的 `ssh: parse error in message type 27` 错误 [moby/moby#3862](https://github.com/moby/moby/pull/3862)。
- seccomp：在默认配置文件中阻止 `AF_VSOCK` 的 socket 调用 [moby/moby#44564](https://github.com/moby/moby/pull/44564)。

## 20.10.21
{{< release-date date="2022-10-25" >}}

此版本的 Docker Engine 包含 Ubuntu 22.10 的更新版本 Docker Compose、Docker Scan、containerd、新增包以及一些小的错误修复和增强。

### 新增

- 为 Ubuntu 22.10（Kinetic Kudu）提供包。
- 添加对 Docker Hub 上 `allow-nondistributable-artifacts` 的支持 [moby/moby#44313](https://github.com/moby/moby/pull/44313)。

### 更新

- 将 Docker Compose 更新至 [v2.12.2](https://github.com/docker/compose/releases/tag/v2.12.2)。
- 将 Docker Scan 更新至 [v0.21.0](https://github.com/docker/scan-cli-plugin/releases/tag/v0.21.0)。
- 将 containerd（`containerd.io` 包）更新至 [v1.6.9](https://github.com/containerd/containerd/releases/tag/v1.6.9)。
- 更新捆绑的 BuildKit 版本以修复 `output clipped, log limit 1MiB reached` 错误 [moby/moby#44339](https://github.com/moby/moby/pull/44339)。

### 错误修复和增强

- 移除 Bash 补全中 `--platform` 的实验性门控 [docker/cli#3824](https://github.com/docker/cli/pull/3824)。
- 修复在 Windows 上从传统 CLI 注册 Docker Engine 为服务时出现的 `Invalid standard handle identifier` panic [moby/moby#44326](https://github.com/moby/moby/pull/44326)。
- 修复在 Windows 上 Cygwin 中运行 Git 命令的问题 [moby/moby#44332](https://github.com/moby/moby/pull/44332)。

## 20.10.20
{{< release-date date="2022-10-18" >}}

此版本的 Docker Engine 包含对 Git 漏洞（[CVE-2022-39253](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-39253)）的部分缓解措施，以及对 `image:tag@digest` 镜像引用的更新处理。

Git 漏洞允许恶意制作的 Git 仓库在用作构建上下文时将任意文件系统路径复制到结果容器/镜像中；这可能在守护进程和 API 客户端中发生，具体取决于使用的版本和工具。

此版本和守护进程 API 的其他消费者中可用的缓解措施是部分的，仅保护使用 Git URL 上下文（例如 `git+protocol://`）构建的用户。由于漏洞仍可能通过与子模块交互和检出的手动运行 Git 命令被利用，用户应立即升级到已修补的 Git 版本以防范此漏洞。更多详细信息可从 GitHub 博客（["Git security vulnerabilities announced"](https://github.blog/2022-10-18-git-security-vulnerabilities-announced/)）获得。

### 更新

- 将 Docker Compose 更新至 [v2.12.0](https://github.com/docker/compose/releases/tag/v2.12.0)。
- 更新了对 `image:tag@digest` 引用的处理。当使用 `image:tag@digest`（“按摘要拉取”）拉取镜像时，镜像解析通过内容可寻址的摘要进行，而 `image` 和 `tag` 未被使用。虽然这是预期的，但这可能导致令人困惑的行为，并且可能通过社会工程学被利用以运行已存在于本地镜像存储中的镜像。Docker 现在检查摘要是否与用于拉取镜像的仓库名称匹配，否则将产生错误。
- 更新了对 `image:tag@digest` 引用的处理。详情请参阅上文“守护进程”部分。

### 错误修复和增强

- 为使用经典构建器和 Git URL 作为构建上下文时的 [CVE-2022-39253](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-39253) 添加了缓解措施。
- 为经典构建器和更新的 BuildKit（至 [v0.8.3-31-gc0149372](https://github.com/moby/buildkit/commit/c014937225cba29cfb1d5161fd134316c0e9bdaa)）添加了对 [CVE-2022-39253](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-39253) 的缓解措施。

## 20.10.19
{{< release-date date="2022-10-14" >}}

此版本的 Docker Engine 包含一些错误修复和更新版本的 Docker Compose。

### 更新

- 将 Docker Compose 更新至 [v2.11.2](https://github.com/docker/compose/releases/tag/v2.11.2)。
- 将 Go 运行时更新至 [1.18.7](https://go.dev/doc/devel/release#go1.18.minor)，其中包含对 [CVE-2022-2879](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2879)、[CVE-2022-2880](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2880) 和 [CVE-2022-41715](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-41715) 的修复。

### 错误修复和增强

- 修复了在 `docker builder prune` 或 `docker system prune` 期间可能导致 panic 的问题 [moby/moby#44122](https://github.com/moby/moby/pull/44122)。
- 修复了使用 `docker volume prune` 会删除仍在使用的卷的错误（如果守护进程以“实时恢复”模式运行并重启）[moby/moby#44238](https://github.com/moby/moby/pull/44238)。

## 20.10.18
{{< release-date date="2022-09-09" >}}

此版本的 Docker Engine 包含对低严重性安全问题的修复、一些小的错误修复，以及更新版本的 Docker Compose、Docker Buildx、`containerd` 和 `runc`。

### 更新

- 将 Docker Buildx 更新至 [v0.9.1](https://github.com/docker/buildx/releases/tag/v0.9.1)。
- 将 Docker Compose 更新至 [v2.10.2](https://github.com/docker/compose/releases/tag/v2.10.2)。
- 将 containerd（`containerd.io` 包）更新至 [v1.6.8](https://github.com/containerd/containerd/releases/tag/v1.6.8)。
- 将 runc 版本更新至 [v1.1.4](https://github.com/opencontainers/runc/releases/tag/v1.1.4)。
- 将 Go 运行时更新至 [1.18.6](https://go.dev/doc/devel/release#go1.18.minor)，其中包含对 [CVE-2022-27664](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-27664) 和 [CVE-2022-32190](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-32190) 的修复。

### 错误修复和增强

- 为 Docker Compose 添加 Bash 补全 [docker/cli#3752](https://github.com/docker/cli/pull/3752)。
- 修复了在构建期间文件能力未被保留的问题 [moby/moby#43876](https://github.com/moby/moby/pull/43876)。
- 修复了可能导致并发 map 读写引发 panic 的问题 [moby/moby#44067](https://github.com/moby/moby/pull/44067)。
- 修复了一个与补充组权限相关的安全漏洞，该漏洞可能允许容器进程绕过容器内的主组限制 [CVE-2022-36109](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-36109)、[GHSA-rc4r-wh2q-q6c4](https://github.com/moby/moby/security/advisories/GHSA-rc4r-wh2q-q6c4)。
- seccomp：在默认策略中添加对 Landlock 系统调用的支持 [moby/moby#43991](https://github.com/moby/moby/pull/43991)。
- seccomp：更新默认策略以支持内核 5.12 - 5.16 中引入的新系统调用 [moby/moby#43991](https://github.com/moby/moby/pull/43991)。
- 修复了镜像清单的缓存查找失败问题，导致对镜像注册表的冗余往返 [moby/moby#44109](