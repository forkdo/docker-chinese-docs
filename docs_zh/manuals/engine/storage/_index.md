---
description: 关于容器中数据持久化的概述
title: 存储
weight: 20
keywords: 存储, 持久化, 数据持久化, 卷, 挂载, 绑定挂载, tmpfs
aliases:
  - /engine/admin/volumes/
  - /storage/
---

Docker 存储涵盖两个不同的概念：

**容器数据持久化**（本页面）：如何使用卷、绑定挂载和 tmpfs 挂载将应用程序数据存储在容器外部。这些数据独立于容器生命周期而持久存在。

**守护进程存储后端**（[containerd 镜像存储](containerd.md) 和 [存储驱动](drivers/)）：守护进程如何在磁盘上存储镜像层和容器可写层。

本页面重点介绍容器数据持久化。有关 Docker 如何存储镜像和容器层的信息，请参阅 [containerd 镜像存储](containerd.md) 或 [存储驱动](drivers/)。

## 容器层基础

默认情况下，容器内创建的所有文件都存储在可写容器层上，该层位于只读、不可变的镜像层之上。

写入容器层的数据在容器被销毁时不会保留。这意味着如果其他进程需要这些数据，可能难以从中提取。

可写层对每个容器都是唯一的。你无法轻松地将可写层中的数据提取到主机，或传输到另一个容器。

## 存储挂载选项

Docker 支持以下几种存储挂载类型，用于在可写层外部存储数据：

- [卷挂载](#volume-mounts)
- [绑定挂载](#bind-mounts)
- [tmpfs 挂载](#tmpfs-mounts)
- [命名管道](#named-pipes)

无论选择哪种挂载类型，从容器内部看到的数据都是一样的。它在容器的文件系统中显示为目录或单个文件。

### 卷挂载

卷是由 Docker 守护进程管理的持久化存储机制。即使使用它们的容器被删除，它们也能保留数据。卷数据存储在主机的文件系统上，但要与卷中的数据交互，你必须将卷挂载到容器中。直接访问或操作卷数据是不支持的、未定义的行为，可能导致卷或其数据以意外方式损坏。

卷非常适合性能关键的数据处理和长期存储需求。由于存储位置由守护进程主机管理，卷提供与直接访问主机文件系统相同的原始文件性能。

### 绑定挂载

绑定挂载在主机系统路径和容器之间创建直接链接，允许访问存储在主机上任何位置的文件或目录。由于它们不受 Docker 隔离，主机上的非 Docker 进程和容器进程可以同时修改挂载的文件。

当你需要从容器和主机都能访问文件时，请使用绑定挂载。

### tmpfs 挂载

tmpfs 挂载将文件直接存储在主机机器的内存中，确保数据不会写入磁盘。这种存储是临时的：当容器停止或重启，或主机重启时，数据会丢失。tmpfs 挂载既不会在 Docker 主机上也不会在容器的文件系统中持久化数据。

这些挂载适用于需要临时、内存中存储的场景，例如缓存中间数据、处理敏感信息（如凭据）或减少磁盘 I/O。仅在数据不需要在当前容器会话之外持久化时使用 tmpfs 挂载。

### 命名管道

[命名管道](https://docs.microsoft.com/en-us/windows/desktop/ipc/named-pipes) 可用于 Docker 主机和容器之间的通信。常见的用例是在容器内运行第三方工具，并使用命名管道连接到 Docker Engine API。

## 下一步

了解更多关于容器数据持久化的信息：

- [卷](./volumes.md)
- [绑定挂载](./bind-mounts.md)
- [tmpfs 挂载](./tmpfs.md)

了解更多关于守护进程存储后端的信息：

- [containerd 镜像存储](containerd.md)
- [存储驱动](drivers/)