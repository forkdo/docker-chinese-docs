---
title: 不可变基础设施
linktitle: 不可变性
description: 了解镜像摘要、只读容器和已签名元数据如何确保 Docker Hardened Images 具有防篡改和不可变的特性。
keywords: 不可变容器镜像, 只读 Docker 镜像, 配置漂移预防, 安全重新部署, 镜像摘要验证
---

不可变基础设施是一种安全和运维模型，其中服务器、容器和镜像等组件在部署后永远不会被修改。与其修补或重新配置实时系统，不如用全新版本完全替换它们。

使用 Docker Hardened Images 时，不可变性是一种最佳实践，能够强化软件供应链的安全态势。

## 为什么不可变性很重要

可变系统更难进行安全保护和审计。现场修补或手动更新会引入以下风险：

- 配置漂移
- 未跟踪的更改
- 环境不一致
- 攻击面扩大

不可变基础设施通过仅通过受控、可重复的构建和部署来实现更改，从而解决这些问题。

## Docker Hardened Images 如何支持不可变性

Docker Hardened Images 旨在保持最小化、锁定和非交互式，从而阻止就地修改。例如：

- 许多 DHI 镜像排除了 shell、包管理器和调试工具
- DHI 镜像设计为在部署前进行扫描和签名
- DHI 用户被鼓励重建和重新部署镜像，而不是修补正在运行的容器

这种设计符合不可变实践，确保：

- 更新通过 CI/CD 管道进行
- 所有更改都经过版本控制和可审计
- 系统可以一致地回滚或重现

## 实践中的不可变模式

利用不可变性的一些常见模式包括：

- 容器替换：不是登录到容器中修复错误或应用补丁，而是重建镜像并重新部署。
- 基础设施即代码 (IaC)：在版本控制的文件中定义基础设施和镜像配置。
- 蓝绿部署或灰度部署：在旧版本旁边推出新镜像，并逐渐将流量转移到新版本。

通过将不可变基础设施原则与强化镜像相结合，您可以创建一个可预测且安全的部署工作流，能够抵御篡改并最小化长期风险。