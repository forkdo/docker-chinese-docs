---
title: 管理域名
description: 添加、验证和管理域名，以控制用户访问并启用 Docker 组织中的自动配置
keywords: 域名管理, 域名验证, 自动配置, 用户管理, DNS, TXT 记录, 管理控制台
weight: 55
aliases:
- /security/for-admins/domain-management/
---

{{< summary-bar feature_name="Domain management" >}}

域名管理允许您为组织添加和验证域名，然后启用自动配置功能，当用户使用与已验证域名匹配的电子邮件地址登录时，自动将其添加到组织中。这种方法简化了用户管理，确保安全设置的一致性，并降低了未受管理的用户访问 Docker 的风险。

本页提供了添加和删除域名、配置自动配置以及审核未捕获用户的步骤。

## 添加和验证域名

添加域名需要验证以确认所有权。验证过程使用 DNS 记录来证明您控制该域名。

### 添加域名

1. 登录 [Docker Home](https://app.docker.com) 并选择您的组织。如果您的组织属于某个公司，请选择该公司并在公司级别为组织配置域名。
1. 选择 **管理控制台**，然后选择 **域名管理**。
1. 选择 **添加域名**。
1. 输入您的域名并选择 **添加域名**。
1. 在弹出的模态框中，复制 **TXT 记录值** 以验证您的域名。

### 验证域名

通过在域名系统 (DNS) 主机中添加 TXT 记录来验证您拥有该域名。DNS 更改可能需要最多 72 小时才能传播。Docker 会自动检查记录，并在识别到更改后确认所有权。

> [!TIP]
>
> 记录名称字段决定了 TXT 记录在您的域名中的添加位置（根域名或子域名）。对于 `example.com` 等根域名，根据您的提供商使用 `@` 或将记录名称留空。不要输入 docker、`docker-verification`、`www` 或您的域名等值，因为这些可能会指向错误的位置。请查阅您的 DNS 提供商文档以确认记录名称要求。

按照您的 DNS 提供商的步骤添加 **TXT 记录值**。如果您的提供商未列出，请使用“其他提供商”的步骤：

{{< tabs >}}
{{< tab name="AWS Route 53" >}}

1. 按照 [使用 Amazon Route 53 控制台创建记录](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html) 将 TXT 记录添加到 AWS。
1. 等待最多 72 小时以完成 TXT 记录验证。
1. 返回 [管理控制台](https://app.docker.com/admin) 的 **域名管理** 页面，选择您域名旁边的 **验证**。

{{< /tab >}}
{{< tab name="Google Cloud DNS" >}}

1. 按照 [使用 TXT 记录验证您的域名](https://cloud.google.com/identity/docs/verify-domain-txt) 将 TXT 记录添加到 Google Cloud DNS。
1. 等待最多 72 小时以完成 TXT 记录验证。
1. 返回 [管理控制台](https://app.docker.com/admin) 的 **域名管理** 页面，选择您域名旁边的 **验证**。

{{< /tab >}}
{{< tab name="GoDaddy" >}}

1. 按照 [添加 TXT 记录](https://www.godaddy.com/help/add-a-txt-record-19232) 将 TXT 记录添加到 GoDaddy。
1. 等待最多 72 小时以完成 TXT 记录验证。
1. 返回 [管理控制台](https://app.docker.com/admin) 的 **域名管理** 页面，选择您域名旁边的 **验证**。

{{< /tab >}}
{{< tab name="Other providers" >}}

1. 登录您的域名主机。
1. 使用 Docker 提供的 **TXT 记录值** 将 TXT 记录添加到您的 DNS 设置中。
1. 等待最多 72 小时以完成 TXT 记录验证。
1. 返回 [管理控制台](https://app.docker.com/admin) 的 **域名管理** 页面，选择您域名旁边的 **验证**。

{{< /tab >}}
{{< /tabs >}}

## 配置自动配置

自动配置会在用户使用与已验证域名匹配的电子邮件地址登录时，自动将用户添加到您的组织中。您必须先验证域名，然后才能启用自动配置。

> [!IMPORTANT]
>
> 对于属于 SSO 连接的域名，在将用户添加到组织时，即时 (JIT) 配置优先于自动配置。

### 自动配置的工作原理

当为已验证域名启用自动配置时：

- 使用匹配电子邮件地址登录 Docker 的用户将自动添加到您的组织中。
- 自动配置仅将现有的 Docker 用户添加到您的组织，不会创建新帐户。
- 用户的登录过程不会发生任何变化。
- 公司和组织所有者会在新用户添加时收到电子邮件通知。
- 您可能需要 [管理席位](/manuals/subscription/manage-seats.md) 以容纳新用户。

### 启用自动配置

自动配置按域名配置。要启用它：

1. 登录 [Docker Home](https://app.docker.com) 并选择您的公司或组织。
1. 选择 **管理控制台**，然后选择 **域名管理**。
1. 选择您要启用自动配置的域名旁边的 **操作菜单**。
1. 选择 **启用自动配置**。
1. 可选。如果在公司级别启用自动配置，请选择一个组织。
1. 选择 **启用** 以确认。

**自动配置** 列将更新为 **已启用**。

### 禁用自动配置

要为用户禁用自动配置：

1. 登录 [Docker Home](https://app.docker.com) 并选择您的组织。如果您的组织属于某个公司，请选择该公司并在公司级别为组织配置域名。
1. 选择 **管理控制台**，然后选择 **域名管理**。
1. 选择您域名旁边的 **操作菜单**。
1. 选择 **禁用自动配置**。
1. 选择 **禁用** 以确认。

## 审核未捕获用户的域名

{{< summary-bar feature_name="Domain audit" >}}

域名审核可识别未捕获的用户。未捕获的用户是指使用与您的已验证域名关联的电子邮件地址进行身份验证但并非 Docker 组织成员的 Docker 用户。

### 限制

域名审核无法识别：

- 未进行身份验证而访问 Docker Desktop 的用户
- 使用未关联您已验证域名的电子邮件地址的帐户进行身份验证的用户

为防止无法识别的用户访问 Docker Desktop，请 [强制登录](/manuals/enterprise/security/enforce-sign-in/_index.md)。

### 运行域名审核

1. 登录 [Docker Home](https://app.docker.com) 并选择您的公司。
1. 选择 **管理控制台**，然后选择 **域名管理**。
1. 在 **域名审核** 中，选择 **导出用户** 以导出未捕获用户的 CSV 文件。

CSV 文件包含以下列：
- 名称：Docker 用户的显示名称
- 用户名：用户的 Docker ID
- 电子邮件：用户的电子邮件地址

### 邀请未捕获的用户

您可以使用导出的 CSV 文件批量邀请未捕获的用户加入您的组织。有关批量邀请用户的更多信息，请参阅
[管理组织成员](/manuals/admin/organization/members.md)。

## 删除域名

删除域名会删除其 TXT 记录值并禁用任何关联的自动配置。

>[!WARNING]
>
> 删除域名将禁用该域名的自动配置并移除验证。此操作无法撤销。

要删除域名：

1. 登录 [Docker Home](https://app.docker.com) 并选择您的组织。如果您的组织属于某个公司，请选择该公司并在公司级别为组织配置域名。
1. 选择 **管理控制台**，然后选择 **域名管理**。
1. 对于您要删除的域名，选择 **操作** 菜单，然后选择 **删除域名**。
1. 在弹出的模态框中选择 **删除域名** 以确认。
